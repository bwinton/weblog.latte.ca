<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<base href="https://bwinton.github.io/weblog.latte.ca/blake/index-14.html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Blake (old posts, page 14) | Blog-O!</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="https://bwinton.github.io/weblog.latte.ca/blake/index-14.html">
<link rel="prev" href="index-15.html" type="text/html">
<link rel="next" href="index-13.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://bwinton.github.io/weblog.latte.ca/">

                <span id="blog-title">Blog-O!</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../archive.html">Archive</a>
                </li>
<li>
<a href="../tags/index.html">Tags</a>
                </li>
<li>
<a href="../rss.xml">RSS feed</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="//duckduckgo.com/" class="navbar-form pull-right">
<input type="hidden" name="sites" value="https://bwinton.github.io/weblog.latte.ca/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<div class="sectionindex">
    <header><h2><a href="index.html">Blake (old posts, page 14)</a></h2>
    </header><div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/firstcommit.html" class="u-url">More hurray!</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/firstcommit.html" rel="bookmark"><time class="published dt-published" datetime="2009-10-28T14:57:44-04:00" itemprop="datePublished" title="2009-10-28 14:57">2009-10-28 14:57</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/firstcommit.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/firstcommit">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p><a href="http://weblog.latte.ca/blake/tech/thunderbird/FirstPatch">A while ago</a> I had my
first patch to Thunderbird committed.</p>
<p><a href="http://hg.mozilla.org/releases/comm-1.9.1/pushloghtml?startdate=2009-10-28+11%3A00&amp;enddate=2009-10-28+11%3A20">Today</a> I pushed my first patch, all by myself.</p>
<p>It’s kind of exciting, having checkin privileges.  It means that I
don’t have to wait for someone else to check in my changes once
they’re accepted.  But on the downside, it means that I’m the one who
has to do the commit, and watch the <a href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Thunderbird3.0">Tinderbox</a>, and
if anything goes wrong, I’m even more on the hook than I previously
was.  (Well, that last part isn’t really true, but I feel way more
nervous than when I could just add “checkin-needed” to the bug, and
not worry about it anymore.)  And basically there’s just a lot of new
stuff for me to keep track of, and figure out.  But since anything I
do is going to show up in the official history, I need to figure it
out <em>before</em> I do it, which always adds a little pressure, which in
this case is probably a good thing.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/buildingfast.html" class="u-url">Building Thunderbird Faster</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/buildingfast.html" rel="bookmark"><time class="published dt-published" datetime="2009-09-26T13:57:39-04:00" itemprop="datePublished" title="2009-09-26 13:57">2009-09-26 13:57</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/buildingfast.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/buildingfast">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>I’m always looking for ways to speed up my Mozilla build, since it allows
me to test my changes even quicker.  I was really excited when I found out
about <tt>make -s tier_app</tt>, since it sped up my compiles by a huge
amount.</p>
<pre class="code literal-block"><span></span>make
real    10m22.630s
user    4m28.072s
sys     1m27.807s
</pre>


<p>vs.</p>
<pre class="code literal-block"><span></span>make -s tier_app
real    0m14.426s
user    0m6.502s
sys     0m3.957s
</pre>


<p>But yesterday, on IRC, I heard about <tt>libs_tier_app</tt>, which is ever
faster, if you haven’t changed any IDL files (which I usually don’t).</p>
<pre class="code literal-block"><span></span>make -s libs_tier_app
real    0m9.407s
user    0m5.440s
sys     0m3.065s
</pre>


<p>Okay, it’s not nearly as good as going from 10 and a half minutes to 15
seconds, but a 30% (or is it 50%) speedup is still nothing to sneer at.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/30b4.html" class="u-url">Thunderbird 3.0 beta 4!</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/30b4.html" rel="bookmark"><time class="published dt-published" datetime="2009-09-23T15:21:33-04:00" itemprop="datePublished" title="2009-09-23 15:21">2009-09-23 15:21</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/30b4.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/30b4">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>I’ve been doing <a href="http://moxie.fligtar.com/thunderbird/3.0b4-blockers//sort:bugsFixed">a lot of work</a>
recently, in preparation for the next (and last!) beta of Thunderbird 3,
and I’m happy to announce that <a href="http://ccgi.standard8.plus.com/blog/archives/270">it was released</a> yesterday!</p>
<p><img alt="Update now!" src="../images/blake/TB3.0b4.png" title="The Update Notification."></p>
<p>The reviews from <a href="http://lifehacker.com/5365214/thunderbird-3-beta-4-available-for-download">LifeHacker</a>
and <a href="http://arstechnica.com/open-source/reviews/2009/09/hands-on-thunderbird-3-beta-4-hatches-with-improved-search.ars">Ars Technica</a>
have been positive, which is always gratifying to see on something you’ve
spent a lot of time on.</p>
<p>For more information, check out the <a href="https://developer.mozilla.org/en/Thunderbird_3_for_users">Thunderbird 3 for
Users</a> page, or
the <a href="http://www.mozillamessaging.com/en-US/thunderbird/3.0b4/releasenotes/">Release Notes</a> for
beta 4.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/pbranch.html" class="u-url">More notes on Mercurial.</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/pbranch.html" rel="bookmark"><time class="published dt-published" datetime="2009-09-21T11:48:34-04:00" itemprop="datePublished" title="2009-09-21 11:48">2009-09-21 11:48</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/pbranch.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/pbranch">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Recently, I made some changes to <a href="http://weblog.latte.ca/blake/tech/thunderbird/mercurial">my work flow</a> to get around
some slight annoyances.  Specifically, I switched from using <a href="http://mercurial.selenic.com/wiki/MqExtension">mq</a> to using <a href="http://arrenbrecht.ch/mercurial/pbranch/">pbranch</a>.  The features that pbranch
gives me that mq didn’t basically boil down to two main things;
sharing, and tracking.</p>
<p>With pbranch, it’s way easier for me to share my changes, both with
other people, and with myself in a virtual machine.  It <em>is</em> possible
to share the patch with mq, by cloning the patch repo if I remembered
to run qinit -C, but with pbranch all I have to do is clone the main
repo, and my changes are right there, waiting for me.</p>
<p>For tracking, when I’m nearing the end of a patch, and it mostly
works, I get really nervous if I can’t check in my changes.  With mq,
I set up an alias to let me commit the patch queue, so that I could go
back, but it was really hard to tell what I had changed between any
two commits, since it was showing me the diff of my diffs.  And so I
didn’t use it as much as I would like to.  With pbranch, I just commit
the code, like I want to, and it keeps track of what the patch should
look like.</p>
<p>So, my day-to-day workflow now looks more like this:<br>
If I’m working on a bug that I’ve already got a patch started for, I
cd to the appropriate branch, type <tt>hg pgraph</tt> to see where I
am, and <tt>hq update branchname</tt> to get to the pbranch I want to
work on.  Then I make my changes, and when I’m happy with the results
of <tt>hg diff</tt>, I type <tt>hg commit</tt> to put the changes into
the pbranch.  After that, I use <tt>hg pdiff &gt;
../branch-name-bugnum-description.diff</tt> to get a patch that I can
upload to bugzilla.  At this point, I usually load the patch into Vim,
and search for some of the mistakes I’ve made in the past.
(<tt>/^+.*[[:space:]]+$</tt>, and <tt>/dump</tt> caught a lot of my
initial mistakes.  Now I’ve moved on to things that are tougher to
check for, like putting open-parens on a new line instead of on the
previous line.)  I usually go through a couple of cycles of <tt>hg
commit</tt>/<tt>hg pdiff …</tt> before I’m happy with the patch.  Once
I am, I don’t have to type anything before I upload it, since it’s
already committed.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/vms.html" class="u-url">Another reason to use Mercurial (or Git or Bazaar)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/vms.html" rel="bookmark"><time class="published dt-published" datetime="2009-09-14T12:12:48-04:00" itemprop="datePublished" title="2009-09-14 12:12">2009-09-14 12:12</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/vms.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/vms">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>A lot of the code I write for <a href="http://mozillamessaging.com/">Thunderbird</a>
has to work on <a href="http://www.mozillamessaging.com/en-US/thunderbird/all.html">all</a> the platforms
it supports.  Since I don’t own a <a href="http://www.ubuntu.com/">Linux</a> or
<a href="http://www.microsoft.com/windows/windows-7">Windows</a> box, and don’t really
want to waste the hard drive space on my <a href="http://www.apple.com/ca/macbookpro/specs.html">MacBook Pro</a> with a dual- or triple-boot
setup, I’ve decided to install the other operating systems on virtual
machines.  (I’ve chosen <a href="http://www.virtualbox.org/">VirtualBox</a>, because
it’s free, and I’m cheap.  As an added bonus, it works quite well, too.)</p>
<p>If I was forced to use a centralized version control system, this would
lead to a bunch of pain, since I wouldn’t want to check in a half-finished
patch, but I would still really want to see what changes I made for one OS,
to try and figure out what changes I need to make for the others.  And I
would want to be able to keep a record of what I did, step by step, so that
I could undo stuff if it turned out to be a bad idea.  (Hey, that sounds
like a perfect task for a version control system!  ;)</p>
<p>Since Mozilla uses <a href="http://mercurial.selenic.com/">Mercurial</a>, I didn’t
have to deal with any of that.  I had my repository on the host machine,
which I had cloned from the main repo, and I just cloned it into each of
the virtual machines.  Whenever I started a VM, I pulled the latest set of
changes from the host machine; As I fixed stuff on that platform, I
committed to the repository on the virtual machine; And before I shut down
the VM, I pushed my changes back to the host machine.  When I wanted to see
which changes I made to get things working for the platform, it was easy,
and propagating those changes to the other virtual machines was also easy.</p>
<p>When people talk about the advantages of distributed version control, a lot
of the time they mention being able to still commit your changes when
you’re on an airplane, and sharing in-progress changes with other people,
but for people like me who do mainly self-contained stuff and don’t fly
anywhere, supporting multi-platforms with virtual machines and still being
able to track my changes might just be the killer feature.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/twitterfail.html" class="u-url">That can’t be good.</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/twitterfail.html" rel="bookmark"><time class="published dt-published" datetime="2009-08-03T12:42:16-04:00" itemprop="datePublished" title="2009-08-03 12:42">2009-08-03 12:42</time></a></p>
                <p class="commentline">
        
    <a href="tech/twitterfail.html#disqus_thread" data-disqus-identifier="/blake/tech/twitterfail">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <p>I don’t know what happened there, but it doesn't look quite right to me.
<img alt="WTF?" src="../images/blake/twitterFail.png" title="What happened to twitter?!?">
Well, it’s fixed now, so I guess no harm, no foul, right?</p>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/30b3.html" class="u-url">Thunderbird 3.0 beta 3 shipped!</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/30b3.html" rel="bookmark"><time class="published dt-published" datetime="2009-07-21T21:13:29-04:00" itemprop="datePublished" title="2009-07-21 21:13">2009-07-21 21:13</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/30b3.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/30b3">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p><a href="http://www.mozillamessaging.com/en-US/about/press/archive/2009-07-21-01">It’s true</a>,
after a lot of hard work, and a few hard decisions, the first version of
Thunderbird that has code of mine in it has shipped.  Dan Mosedale has
<a href="http://weblogs.mozillazine.org/dmose/archives/2009/07/thunderbird_30b3_shipped.html">some comments</a>
on what’s changed.  If you like Thunderbird, please download it, give it a try,
and let me know what you think!</p>
<p>On a more personal note, the thing I did on this release that I’m the most
proud of was to add a button that lets you reply to a mailing list.</p>
<p><img alt="Reply to a mailing list" src="../images/blake/ReplyToList3.0b3.png" title="The Reply-To-List Button."></p>
<p>I’m proud of it because it feels like a neat-but-still-usable UI, and because
it is one more step on the road to getting people to change their mailing lists
to <a href="http://woozle.org/~neale/papers/reply-to-still-harmful.html">not munge the Reply-To header</a>.  (With this
patch, you are given the option of replying to the list, or the author.  Unless
the list has set the Reply-To to point to the list, in which case you can only
mail the list.)</p>
<p>A couple of the other areas I worked on for this release were updating the
Activity Manager so that it didn’t hang when you clicked “Clear Now”, and
so that it merged a bunch of move/copy/delete notifications into a single
notification that told you how many messages had been processed; and fixing
a some layout and logic bugs in the Autoconfig dialog (which you get to
from “File » New » Mail Account (Quick Setup)…”).  Yeah, the Autoconfig
dialog is still kind of ugly, but it’s better now than it used to be, and
I’m working on making it prettier for beta 4.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="employment/mozilla/jobatmomo.html" class="u-url">My first couple of days at Mozilla Messaging.</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="employment/mozilla/jobatmomo.html" rel="bookmark"><time class="published dt-published" datetime="2009-07-07T00:04:20-04:00" itemprop="datePublished" title="2009-07-07 00:04">2009-07-07 00:04</time></a></p>
                <p class="commentline">
        
    <a href="employment/mozilla/jobatmomo.html#disqus_thread" data-disqus-identifier="/blake/employment/mozilla/jobatmomo">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>A few weeks ago I started a new full-time contract at <a href="http://mozillamessaging.com/">Mozilla
Messaging</a> (a.k.a. the people who brought you
Thunderbird).  I meant to post this on the Wednesday after I started, but
didn’t get around to it until now.  So, here you go, my notes from just
after I started a new job.</p>
<p>It has been a pretty crazy couple of days, both because I’m not that used
to working for a full 8 hours on one thing, and because I’m at the point
where there’s still so much to learn that I could spend all my time
researching stuff, and never get anything done.</p>
<p>But even with all the stuff for me to learn, I feel like I’ve made a fair
bit of progress.  There were a few bugs assigned to me, based on <a href="http://hg.mozilla.org/comm-central/rev/98a7de404c08">a
previous patch</a>, as
well as a couple of things left to do to get <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=45715">the feature</a> working, so I jumped
right in to those.  After I had new patches up for review on all of those
bugs, I talked with <a href="http://clarkbw.net/blog/">Bryan Clark</a> about what bugs
I should tackle next.  He and <a href="http://ascher.ca/blog/">David Ascher</a> both
suggested that the new <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=autoconfig">automatic mail server config</a> dialog could use a
bit of love.</p>
<p>This morning, I did some investigation on group email addresses for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=496440">one of
the bugs</a> I’m working
on, and took a look at how the autoconfig dialog was put together so that I
wouldn’t sound like I was completely lost in the meeting.  (XUL, CSS, and
Javascript.  No surprises there.  :)  Then, after the <a href="https://wiki.mozilla.org/Thunderbird/StatusMeetings/2009-06-09">Status
Meeting</a>,
Bryan and I chatted a bit about what the various bugs were that he had
assigned to me, and what sort of things I might look into to try and fix
them.  A few hours later, I had a fix for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=490105">one of them</a>, and applied a similar
fix to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=490106">another</a>.  (As
an aside, you’ve got to love the 3 hour investigation which ends up being a
9-character change.  At least while investigating the bug, I learned a lot
about <a href="https://developer.mozilla.org/en/XUL/hbox">hboxes</a>, <a href="https://developer.mozilla.org/en/XUL/vbox">vboxes</a>, <a href="https://developer.mozilla.org/en/XUL/Attribute/flex">flexes</a>, <a href="https://developer.mozilla.org/en/XUL/grid">grids</a>, and <a href="https://developer.mozilla.org/en/XUL/description">descriptions</a>, which will hopefully
come in handy in future bugs.  :)  Finally, I ended the day by reading a
review of a patch I submitted on Monday morning, making some tweaks to my
code, and resubmitting it.</p>
<p>The final thing that amazes me is that each day is taking up pretty much a
full page of my log book, which is <em>way</em> more than usual.  Most of the days
last month got a line or two.  Really full days would maybe get half a
page.  But yesterday and today were a solid page, chock full of
information, each.  I wonder how long this trend will continue.  I hope it
keeps on going like this for a long time.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="random/soy.html" class="u-url">An odd coincidence?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="random/soy.html" rel="bookmark"><time class="published dt-published" datetime="2009-07-06T10:50:50-04:00" itemprop="datePublished" title="2009-07-06 10:50">2009-07-06 10:50</time></a></p>
                <p class="commentline">
        
    <a href="random/soy.html#disqus_thread" data-disqus-identifier="/blake/random/soy">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <p>I have a theory.  (No, it’s not bunnies.)  One of my favourite foods is soy
beans.  I love it both because they’re tasty, and because they’re so
changeable.  I mean, what other substance can be used to make a hard white
solid (tofu), and a viscous black liquid (soy sauce)?  Hey, waitaminnute.
“Soy beans” are oil!  It’s all just different names for petrochemicals!</p>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/mercurial.html" class="u-url">How I use Mercurial (and the MQ extension).</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/mercurial.html" rel="bookmark"><time class="published dt-published" datetime="2009-06-30T22:31:48-04:00" itemprop="datePublished" title="2009-06-30 22:31">2009-06-30 22:31</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/mercurial.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/mercurial">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>I started working for <a href="http://www.mozillamessaging.com">Mozilla Messaging</a> a
while ago, and since <a href="http://blog.codekills.net/">David Wolever</a> <a href="http://twitter.com/wolever/status/2394705659">asked
me</a> how I used Mercurial and the
MQ extension, I thought I would put up some notes on how I’m currently using
them in my day-to-day work.  Of course, the stuff I’m doing now is a little
different than what I’ve done in any of my previous jobs, so I’m not sure how
useful any of the following will be to anyone who isn’t contributing to an open
source project.</p>
<p>First, let’s talk a little bit about how I have my Work directory set up.  The
first thing I did when I started working on the Thunderbird source code was to
pull down a clean copy of the source into a directory named “src-base”.  The
purpose of that directory is to always contain a clean copy of the upstream
source code so that when I want to update the various branches I have (five, at
last count), I only need to download the changes from the Mozilla repo once,
and I can then propagate them from src-base to the other branches.  I got the
idea to do that from the Bazaar-NG developers, and I think it has helped to
keep my bandwidth usage down.  It might cause a problem if I was sharing my
branches, but since Thunderbird seems to revolve around submitting patches to
bugzilla, it works out pretty well.</p>
<p>The next thing I did was to clone src-base into a directory named
“add-reply-list-button” (because I was writing a patch to add a Reply-To-List
button :), go into that directory, and type <tt>hg qinit -c</tt> to create an
mq repository, and put the mq repository itself under version control.  (I
didn’t actually do that the first time, and was quite annoyed that I couldn’t
revert changes I had made in my patch queue.)  The other part of that is that
I’ve aliased <tt>mq</tt> to <tt>hg -R $(hg root)/.hg/patches</tt>.  This lets
me type <tt>mq commit</tt> to commit the changes to the patch.</p>
<p>So, now we’re at my day-to-day work.  If I’m working on a bug that I’ve already
got a patch started for, I cd to the appropriate branch, type <tt>hg
qseries</tt> to see where I am, and <tt>hq qpush</tt> or <tt>hg qpop</tt> to
get to the patch I want to work on.  Then I make my changes, and when I’m happy
with the results of <tt>hg diff</tt>, I type <tt>hg qrefresh</tt> to put the
changes into the patch.  After that, I use <tt>hg qdiff &gt;
../branch-name-bugnum-description.diff</tt> to get a patch that I can upload to
bugzilla.  At this point, I usually load the patch into Vim, and search for
some of the mistakes I’ve made in the past.  (<tt>/^+.*[[:space:]]+$</tt>, and
<tt>/dump</tt> caught a lot of my initial mistakes.  Now I’ve moved on to
things that are tougher to check for, like putting open-parens on a new line
instead of on the previous line.)  I usually go through a couple of cycles of
<tt>hg qrefresh</tt>/<tt>hg qdiff …</tt> before I’m happy with the patch.  Once
I am, I type <tt>mq commit -m "Updated patch to fix foo and bar."</tt> to save
the state of the patch, and then I upload it.</p>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-15.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-13.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="latteblog";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>

        </div>
        <!--End of body content-->

        <footer id="footer"><div style="margin-bottom: 12px">Contents © 2016         <a href="mailto:bwinton@latte.ca">Blake Winton</a>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">
<img alt="Creative Commons License BY-NC-SA" style="border-width: 0; vertical-align: bottom" src="https://licensebuttons.net/l/by-nc-sa/2.5/88x31.png"></a>
</div>
            
        </footer>
</div>
</div>


            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/moment-with-locales.min.js"></script><script src="../assets/js/fancydates.js"></script><script src="../assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5805429-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
