<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Blake (old posts, page 15) | Blog-O!</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="https://bwinton.github.io/weblog.latte.ca/blake/index-15.html">
<link rel="prev" href="index-16.html" type="text/html">
<link rel="next" href="index-14.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://bwinton.github.io/weblog.latte.ca/">

                <span id="blog-title">Blog-O!</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../archive.html">Archive</a>
                </li>
<li>
<a href="../tags/index.html">Tags</a>
                </li>
<li>
<a href="../rss.xml">RSS feed</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="//duckduckgo.com/" class="navbar-form pull-right">
<input type="hidden" name="sites" value="https://bwinton.github.io/weblog.latte.ca/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<div class="sectionindex">
    <header><h2><a href="index.html">Blake (old posts, page 15)</a></h2>
    </header><div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="employment/mozilla/somejetpacks.html" class="u-url">Some new toys</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="employment/mozilla/somejetpacks.html" rel="bookmark"><time class="published dt-published" datetime="2010-09-06T17:56:09-04:00" itemprop="datePublished" title="2010-09-06 17:56">2010-09-06 17:56</time></a></p>
                <p class="commentline">
        
    <a href="employment/mozilla/somejetpacks.html#disqus_thread" data-disqus-identifier="/blake/employment/mozilla/somejetpacks">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>There have been a couple of things I’ve noticed myself doing over and over
again recently, and because I’m a developer whenever I do something over
and over again, I try to find a way to automate it.</p>
<p>So I did some playing around with Mozilla’s <a href="https://builder.mozillalabs.com/">Add-on Builder</a> and came up with <a href="http://bwinton.latte.ca/Work/jetpacks/">a couple of Jetpacks</a> that solved my problems.  Maybe
you’ll find them useful, too.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/moresecure.html" class="u-url">More secure!</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/moresecure.html" rel="bookmark"><time class="published dt-published" datetime="2010-08-25T17:34:42-04:00" itemprop="datePublished" title="2010-08-25 17:34">2010-08-25 17:34</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/moresecure.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/moresecure">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>As someone who works on an email client, I’m interested in making
my communications more secure.  So, with the assistance of
<a href="http://perso.hirlimann.net/~ludo/blog/">Ludovic</a> and
<a href="http://gozer.ectoplasm.org/blog/">Gozer</a>, I got a client certificate that
would allow me to sign and encrypt my messages.  (Check out the envelope
and lock in the image below.)</p>
<p><img alt="An outgoing message, with an envelope and a
lock" src="../images/blake/SignedAndEncrypted.png" title="Signed and Encrypted"></p>
<p>Most of the time, I’ll probably just sign my messages – after all, that’s
what I’ve set it up to do by default – but it’s nice to know that if
there’s something I need to encrypt, that option is now available to me.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="random/zergrush.html" class="u-url">OMG!  Zerg Rush!</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="random/zergrush.html" rel="bookmark"><time class="published dt-published" datetime="2010-08-11T14:34:51-04:00" itemprop="datePublished" title="2010-08-11 14:34">2010-08-11 14:34</time></a></p>
                <p class="commentline">
        
    <a href="random/zergrush.html#disqus_thread" data-disqus-identifier="/blake/random/zergrush">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>File this one under stupid Unicode tricks, I think.</p>

<p><font size="20px">
♖♘♗♔♕♗♘♖<br>
♙♙♙♙♙♙♙♙<br>
♟♟♟♟♟♟♟♟<br>
♟♟♟♟♟♟♟♟<br>
♟♟♟♟♟♟♟♟<br>
♟♟♟♟♟♟♟♟<br>
♟♟♟♟♟♟♟♟<br>
♟♟♟♟♟♟♟♟<br></font></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/zsh.html" class="u-url">A handy zsh function (for OS X)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/zsh.html" rel="bookmark"><time class="published dt-published" datetime="2010-07-19T10:20:13-04:00" itemprop="datePublished" title="2010-07-19 10:20">2010-07-19 10:20</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/zsh.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/zsh">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>A co-worker of mine was having problems remembering where the <a href="http://mxr.mozilla.org/comm-central/source/client.mk">makefile</a> puts the binary for
<a href="http://mozillamessaging.com/">Thunderbird</a> when you build it yourself.
Now, I type in the path far too often, so I know where it is (on my
computer, anyways), but since I type it in far too often, I grabbed
someone's <a href="http://www.zsh.org/">zsh</a> function that launched <a href="http://www.mozilla.com/">Firefox</a>, and modified it to launch Thunderbird from either
the build directory or the source directory, but only on Mac OS X.</p>
<p>Anyways, here it is, I hope some of you find it useful.</p>
<table class="codehilitetable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td>
<td class="code">
<pre class="code literal-block"><span></span>thunderbird<span class="o">()</span> <span class="o">{</span>
  <span class="nb">local</span> -a currdir<span class="p">;</span>
  <span class="nv">currdir</span><span class="o">=</span>$PWD:t<span class="p">;</span>
  <span class="k">for</span> nm in LanikaiDebug ShredderDebug Lanikai Shredder<span class="p">;</span> <span class="k">do</span>
    <span class="k">if</span> <span class="o">[</span> -d <span class="s2">"./mozilla/dist/</span>$<span class="s2">nm.app"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
      ./mozilla/dist/$nm.app/Contents/MacOS/thunderbird-bin <span class="nv">$*</span>
      break<span class="p">;</span>
    <span class="k">elif</span> <span class="o">[</span> -d <span class="s2">"../objdir-</span><span class="nv">$c</span><span class="s2">urrdir/mozilla/dist/</span>$<span class="s2">nm.app"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
      ../objdir-<span class="nv">$c</span>urrdir/mozilla/dist/$nm.app/Contents/MacOS/thunderbird-bin <span class="nv">$*</span>
      break<span class="p">;</span>
    <span class="k">fi</span>
  <span class="k">done</span>
<span class="o">}</span>
</pre>
</td>
</tr></table>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/personas.html" class="u-url">Cool stuff coming soon.</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/personas.html" rel="bookmark"><time class="published dt-published" datetime="2010-04-16T09:55:11-04:00" itemprop="datePublished" title="2010-04-16 09:55">2010-04-16 09:55</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/personas.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/personas">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>I’ve been reviewing a patch from <a href="http://www.andreasn.se/blog/">Andreas</a>
and <a href="http://ccgi.standard8.plus.com/blog/">Standard8</a> which adds
lightweight theme support (aka personas) to Thunderbird.  It’s so cool that
I couldn’t resist taking a screenshot, and posting it for you all to see!</p>
<p><img alt="Pretty new persona" src="../images/blake/Thunderbird/Personas.png" title="Oooh, fancy."></p>
<p>It looks like there’s a good chance the code will make it in to Thunderbird
3.1 beta 2, so with any luck, soon your Thunderbird will be a pretty as
mine.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/migrationassistantv1.html" class="u-url">Your feedback is needed on our new Migration Assistant!</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/migrationassistantv1.html" rel="bookmark"><time class="published dt-published" datetime="2010-04-03T22:08:22-04:00" itemprop="datePublished" title="2010-04-03 22:08">2010-04-03 22:08</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/migrationassistantv1.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/migrationassistantv1">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>For the next version of Thunderbird, <a href="http://clarkbw.net/blog/">Bryan Clark</a>, <a href="http://www.andreasn.se/blog/">Andreas Nilsson</a>, and I have done a lot
of work to make it easier to upgrade your profile from Thunderbird 2, and
we would like to hear what you think of it, and how we can make it even
better.</p>
<p>There are some things we’re particularly interested in (mostly on the “Disk
space” tab), such as:</p>
<ol>
<li>Are your existing settings preserved?</li>
<li>If you have no previous settings do we choose “Do not Synchronize” by
default?</li>
<li>For those of you who choose not to synchronize your messages, does that appear to work correctly?</li>
</ol>
<p>We also have some more general questions, like:</p>
<ol>
<li>Does it look okay?  Do the sizes seem correct?</li>
<li>Do the options make sense, and how can we make them clearer?</li>
<li>Do the buttons work the way you think they should?</li>
</ol>
<p>You can download the builds for various Operating Systems at the following
links:</p>
<p><a href="http://s3.mozillamessaging.com/build/try-server/2010-03-31_18:40-bwinton@latte.ca-bw-MigAsst/bwinton@latte.ca-bw-MigAsst-mail-try-win32.installer.exe">Windows</a></p>
<p><a href="http://s3.mozillamessaging.com/build/try-server/2010-03-31_18:40-bwinton@latte.ca-bw-MigAsst/bwinton@latte.ca-bw-MigAsst-mail-try-mac.dmg">Mac OS X</a></p>
<p><a href="http://s3.mozillamessaging.com/build/try-server/2010-03-31_18:40-bwinton@latte.ca-bw-MigAsst/bwinton@latte.ca-bw-MigAsst-mail-try-linux.tar.bz2">Linux</a></p>
<p>And please leave your feedback on <a href="http://www.getsatisfaction.com/mozilla_messaging/topics/feedback_on_the_new_migration_assistant_for_people_upgrading_from_2_x_to_3_1">Mozilla Messaging’s GetSatsifaction
Topic</a>
by the end of day on this coming Wednesday (April 7th), so that we have
time to tweak the code and the design before the deadline.</p>
<p>Thanks!</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/ucosp/weixian-visualstudio.html" class="u-url">Programming Thunderbird in Visual Studio.</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/ucosp/weixian-visualstudio.html" rel="bookmark"><time class="published dt-published" datetime="2010-03-30T10:11:05-04:00" itemprop="datePublished" title="2010-03-30 10:11">2010-03-30 10:11</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/ucosp/weixian-visualstudio.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/ucosp/weixian-visualstudio">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>For your reading pleasure this week, we have a guest post from <a href="mailto:wxwoo@uwaterloo.ca">Wei Xian
Woo</a>.  Wei is a student working on
<a href="http://www.mozillamessaging.com/">Thunderbird</a> as part of
<a href="http://ucosp.wordpress.com/">UCOSP</a>, and has just had <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=408338">his first
bug</a> marked as
FIXED.  Anyways, that’s enough out of me.  Here’s Wei’s post:</p>
<blockquote>
<h4>Programming Thunderbird in Visual Studio.</h4>
<p>During this term’s Undergraduate Capstone Open Source Projects (UCOSP)
Code Sprint held at the University of Toronto in January, I wrote a
simple Python script for the Thunderbird team to make setting up a
Visual C++ project for Thunderbird slightly easier for those of us
working on Windows. Blake suggested making this script public so others
could benefit from it, so here it is! The script is generic enough to be
used for any project, not just Thunderbird. Feel free to use it and make
modifications as you see fit :)</p>
<h4>Using the script to create a Visual C++ project for Thunderbird</h4>
<p>Create an empty Visual C++ project in Visual Studio.</p>
<p>From the command prompt launched by mozilla-build\start-msvc9.bat, do:</p>
<pre class="code literal-block"><span></span>python /path/to/refreshvcproj.py
--vcproj=/path/to/thunderbird.vcproj --dir=/path/to/gecko-sdk
--dir=/path/to/mozilla/comm-central/mozilla/xpcom
--dir=/path/to/mozilla/comm-central/mail
</pre>


<p>All files in the specified directories will be included in the project.
I suggest including only the directories you will be working with.</p>
<h4>Configuring the project for debugging:</h4>
<p>Open the VC++ project file in Visual Studio, and then open the project's
Properties.</p>
<p>Go to: Configuration Properties -&gt; Debugging.</p>
<p>Set Command to \path\to\objdir\mozilla\dist\bin\thunderbird.exe</p>
<p>Set Environment to XPCOM_DEBUG_BREAK=warn</p>
<h4>And… you’re done!</h4>
<p>For better C++ IntelliSense, you might also want to consider getting
Visual Assist X (an add-on for VS).</p>
<h4>Happy coding!</h4>
</blockquote>
<p>And you can find the script <a href="../static/blake/refreshvcproj.py">over here</a>.</p>
<p>Thanks, Wei!</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/debugging.html" class="u-url">How to (not quite) fix a bug.</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/debugging.html" rel="bookmark"><time class="published dt-published" datetime="2010-03-10T22:17:58-05:00" itemprop="datePublished" title="2010-03-10 22:17">2010-03-10 22:17</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/debugging.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/debugging">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>I’ve run into <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=545933">a bug</a>.  It’s a really annoying bug, because it prevents me from changing
folders when I try to test any of my Thunderbird changes.</p>
<p>I tried putting dump statements everywhere, to see if I could figure out
what was going on, but they were to no avail.  Then, I thought about
looking for the error code.</p>
<p>So the <a href="http://silver.warwickcompsoc.co.uk/mozilla/misc/nserror?0x805E0006">error lookup page</a> says
that the error that’s reported is:</p>
<pre class="code literal-block"><span></span><span class="k">Module</span>          <span class="nn">Severity</span>        <span class="n">Number</span>
<span class="n">CONTENT</span> <span class="p">(</span><span class="mi">25</span><span class="p">)</span>    <span class="n">Failure</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="mi">6</span>
</pre>


<p>And
<a href="http://scotland.proximity.on.ca/dxr/mozilla-central/content/base/public/nsContentErrors.h.html#l59">DXR</a>
says that Content Error 6 is:
    NS_ERROR_CONTENT_BLOCKED</p>
<p>Which occurs, among other places,
<a href="http://mxr.mozilla.org/comm-central/source/mozilla/content/base/src/nsDocument.cpp#1129">here</a></p>
<p>But when I set a breakpoint there, it didn’t hit it.  So instead of
trusting mxr or dxr, I did a grep (well, an ack, but same thing), and
started setting breakpoints on a few of the hits.</p>
<p>The one that hit my breakpoint ended up being <a href="http://mxr.mozilla.org/comm-central/source/mozilla/docshell/base/nsDocShell.cpp#7643">this
one</a>
which, weirdly enough, isn’t even listed in the mxr results of <a href="http://mxr.mozilla.org/comm-central/ident?i=NS_ERROR_CONTENT_BLOCKED">this
search</a></p>
<p>Now that I’m at the breakpoint, we’re halfway there, I hope.  ;)</p>
<p>How I got there was:</p>
<pre class="code literal-block"><span></span>(gdb) bt
#0  nsDocShell::InternalLoad (…) at …/mozilla/docshell/base/nsDocShell.cpp:7643
#1  0x152d9daa in nsDocShell::LoadURI (…) at …/mozilla/docshell/base/nsDocShell.cpp:1369
#2  0x13dc7581 in nsLocation::SetURI (…) at …/mozilla/dom/base/nsLocation.cpp:316
#3  0x13dc8af3 in nsLocation::SetHrefWithBase (…) at …/mozilla/dom/base/nsLocation.cpp:595
#4  0x13dc8cf9 in nsLocation::SetHrefWithContext (…) at …/mozilla/dom/base/nsLocation.cpp:542
#5  0x13dc9120 in nsLocation::SetHref (…) at …/mozilla/dom/base/nsLocation.cpp:510
#6  0x003fa28e in NS_InvokeByIndex_P (…) at …/mozilla/xpcom/reflect/xptcall/src/md/unix/xptcinvoke_unixish_x86.cpp:179
#7  0x120f88bb in XPCWrappedNative::CallMethod (…) at …/mozilla/js/src/xpconnect/src/xpcwrappednative.cpp:2727
#8  0x1210c0c6 in XPCWrappedNative::SetAttribute (…) at xpcprivate.h:2550
#9  0x12105530 in XPC_WN_GetterSetter (…) at …/mozilla/js/src/xpconnect/src/xpcwrappednativejsops.cpp:1792
#10 0x001141a7 in js_Invoke (…) at jsinterp.cpp:1388
[…]
</pre>


<p>And it looks like we get there because the return value of
NS_CheckContentLoadPolicy is 0x80004003, or NS_ERROR_INVALID_POINTER.</p>
<p>Then, after dinner, I tracked it down a little further, and if you place a
breakpoint on the “\n\nAAAAAA\nrv5=%x\n” line in <a href="https://bug545933.bugzilla.mozilla.org/attachment.cgi?id=427516">this patch</a>, you can
see that it’s the folder = do_QueryInterface(subFolder, &amp;rv); line
which is causing the failure, because the subFolder’s mRawPtr is null.</p>
<p>But I have no idea why <em>that</em>’s happening, so I posted what I had, and
hoped that someone else could take it and run with it.  And Bienvenu did,
and now it’s much less of a problem for me, and I can go work on other
things.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/thunderbird/foldermodes.html" class="u-url">How folder modes work.</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/thunderbird/foldermodes.html" rel="bookmark"><time class="published dt-published" datetime="2009-12-20T16:45:00-05:00" itemprop="datePublished" title="2009-12-20 16:45">2009-12-20 16:45</time></a></p>
                <p class="commentline">
        
    <a href="tech/thunderbird/foldermodes.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/foldermodes">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Earlier today, I was asked by <a href="http://www.andreasn.se/blog/">Andreas Nilsson</a> to give him a hand with a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=535021">folder pane header
bug</a> he was trying to
fix.  In the middle of digging around in the code, I thought “I should
really write this down, so that I can understand it later.”, and so here it
is.</p>
<p>The main place we’ll need to change is in <a href="http://mxr.mozilla.org/comm-central/source/mail/base/content/folderPane.js#55">this object</a>.</p>
<p>We start in the <a href="http://mxr.mozilla.org/comm-central/source/mail/base/content/folderPane.js#60"><tt>load</tt></a>
method, which calls <a href="http://mxr.mozilla.org/comm-central/source/mail/base/content/folderPane.js#67"><tt>registerMode</tt></a>,
to add the mode with its localized name.  There is also a <a href="http://mxr.mozilla.org/comm-central/source/mail/base/content/folderPane.js#984">default list of
modes</a>,
which will come into play later.</p>
<p>When the user chooses to <a href="http://mxr.mozilla.org/comm-central/source/mail/base/content/folderPane.js#200">cycle the mode</a>,
it calls the <a href="http://mxr.mozilla.org/comm-central/source/mail/base/content/folderPane.js#250">setter for <tt>mode</tt></a>,
passing it the modename, which comes from the <tt>_modeNames</tt> list
(which contains both the defaults and any newly-registered modes).  Then,
in the setter, if the mode is a default mode, it will fail <a href="http://mxr.mozilla.org/comm-central/source/mail/base/content/folderPane.js#254">the if-test</a>,
and get the localized name from the “bundle_messenger” string bundle.  If
it’s a newly-registered mode, they will have passed in a localized name
which we will have stored in <a href="http://mxr.mozilla.org/comm-central/source/mail/base/content/folderPane.js#178"><tt>this._modeDisplayNames</tt></a>,
and so we will <a href="http://mxr.mozilla.org/comm-central/source/mail/base/content/folderPane.js#255">use that</a>.</p>
<p>The point of the bug is to switch the label-and-two-buttons to a dropdown
menu, so at this point I think we should start with an empty
<tt>menulist</tt> in the XUL, and in the <tt>load</tt> method add
<tt>menuitems</tt> corresponding to the values in the <tt>_modeNames</tt>
array.  Then, in the <tt>registerMode</tt> and <a href="http://mxr.mozilla.org/comm-central/source/mail/base/content/folderPane.js#187"><tt>unregisterMode</tt></a>
methods, we should add and remove new menuitems, which I’m hoping will just
automatically show up in the dropdown.  Finally, we need to change the
setter for <tt>mode</tt> to not calculate the new name, but just select the
appropriate menuitem set the <tt>mode</tt> attribute on the
<tt>_treeElement</tt>, and call <tt>_rebuild()</tt>.  At that point, I
think we’re done, but only time will tell.</p>
<p><small>Okay, so this was really posted on Dec 22<sup>nd</sup>, but I wanted
to back-date it so as not to bump Amy’s “Welcome” post off the top a mere
day after she posted it.</small></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="tech/opengl/experiments.html" class="u-url">Experiments in OpenGL (on the iPhone 3GS).</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="tech/opengl/experiments.html" rel="bookmark"><time class="published dt-published" datetime="2009-12-10T13:16:05-05:00" itemprop="datePublished" title="2009-12-10 13:16">2009-12-10 13:16</time></a></p>
                <p class="commentline">
        
    <a href="tech/opengl/experiments.html#disqus_thread" data-disqus-identifier="/blake/tech/opengl/experiments">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>While I was at the Toronto iPhone Tech Talks, I attended the OpenGL ES
sessions by <a href="http://twitter.com/funnest">Allan Schaffer</a>.  Seeing the
“Shock” demo was really inspiring, and caused me to want to try my
hand at some simple OpenGL Shader demos.</p>
<p>The base XCode OpenGL ES Application template sets you up pretty
nicely for some simple experimentation, the only things that gave me
any trouble were:</p>
<ol>
<li>
<p>remembering to set the identifier to ca.latte.whatever so that I
could build, and</p>
</li>
<li>
<p>remembering that the OpenGL ES 2.0 path only ran on the device, so
of course none of the changes I was making were showing up on the
simulator<sup id="fnref:1"><a class="footnote-ref" href="tech/opengl/experiments.html#fn:1" rel="footnote">1</a></sup>, and finally</p>
</li>
<li>
<p>Figuring out that depth was position.w, and not position.z.  (Did I
mention that I’m a bit of a newbie at this?)</p>
</li>
</ol>
<p>Anyways, after it was all up and running, I made the x and w
co-ordinates vary on a different period than the y co-ordinate, and
now the square moves around in 3 dimensions in a pleasing (to me) way.</p>
<p><img alt="A pretty square." src="../images/blake/iTouch/OpenGL/1-square.jpg" title="A square, that’s all."></p>
<p>Since this is intended for me to play around with shaders, I’m not
going to bother updating the OpenGL ES 1.0 code path, but if you’ve
got an iPhone 3GS, or a 3rd generation iTouch, feel free to grab the
code at <a href="http://bitbucket.org/bwinton/opengl/">BitBucket</a>, and play
around.  I'll be adding branches and tags and keeping it updated as I
play with new stuff.</p>
<div class="footnote">
<hr>
<ol>
<li id="fn:1">
<p><a href="http://twitter.com/runmad">Rune</a> let me know that Open GL ES
2.0 is supported in the latest version of the simulator.  I guess I
must have been testing with an earlier version of the SDK, or XCode,
or something. <a class="footnote-backref" href="tech/opengl/experiments.html#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-16.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-14.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="latteblog";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>

        </div>
        <!--End of body content-->

        <footer id="footer"><div style="margin-bottom: 12px">Contents © 2017         <a href="mailto:bwinton@latte.ca">Blake Winton</a>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">
<img alt="Creative Commons License BY-NC-SA" style="border-width: 0; vertical-align: bottom" src="https://licensebuttons.net/l/by-nc-sa/2.5/88x31.png"></a>
</div>
            
        </footer>
</div>
</div>


            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/moment-with-locales.min.js"></script><script src="../assets/js/fancydates.js"></script><script src="../assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5805429-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
