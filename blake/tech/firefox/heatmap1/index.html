<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Figuring out where things are in an image. | Blog-O!</title>
<link href="../../../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/bootblog.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../rss.xml">
<link rel="canonical" href="https://bwinton.github.io/weblog.latte.ca/blake/tech/firefox/heatmap1/">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Blake Winton">
<link rel="prev" href="../../../../amy/everythingelse/resolutions2014/" title="New Year’s Resolutions" type="text/html">
<link rel="next" href="../../../random/microblog/newthoughts/" title="New kinds of thoughts." type="text/html">
<meta property="og:site_name" content="Blog-O!">
<meta property="og:title" content="Figuring out where things are in an image.">
<meta property="og:url" content="https://bwinton.github.io/weblog.latte.ca/blake/tech/firefox/heatmap1/">
<meta property="og:description" content="People love heatmaps.
They’re a great way to show how much various UI elements are used in relation
to each other, and are much easier to read at a glance than a table of click-
counts would be.  They">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-07-07T11:53:31-04:00">
<meta property="article:tag" content="heatmap">
<meta property="article:tag" content="mozilla">
<meta property="article:tag" content="tributary">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
<!-- Custom search -->
<form method="get" id="search" action="//duckduckgo.com/" class="navbar-form pull-right">
<input type="hidden" name="sites" value="https://bwinton.github.io/weblog.latte.ca/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->

            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="https://bwinton.github.io/weblog.latte.ca/">

            <span id="blog-title">Blog-O!</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav"></ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../../../tags/index.html" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Figuring out where things are in an image.</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../../../authors/blake-winton/">Blake Winton</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2014-07-07T11:53:31-04:00" itemprop="datePublished" title="2014-07-07 11:53">2014-07-07 11:53</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>People love <a href="https://blog.mozilla.org/ux/2012/06/firefox-heatmap-study-2012-results-are-in/">heatmaps</a>.</p>
<p>They’re a great way to show how much various UI elements are used in relation
to each other, and are much easier to read at a glance than a table of click-
counts would be.  They can also reveal hidden patterns of usage based on the
locations of elements, let us know if we’re focusing our efforts on the
correct elements, and tell us how effective our communication about new
features is.  Because they’re so useful, one of the things I am doing in my
new role is setting up the framework to provide our UX team with automatically
updating heatmaps for both Desktop and Android Firefox.
<!-- TEASER_END --></p>
<p>Unfortunately, we can’t just wave our wands and have a heatmap magically
appear.  Creating them takes work, and one of the most tedious processes is
figuring out where each element starts and stops.  Even worse, we need to
repeat the process for each platform we’re planning on displaying. This is one
of the primary reasons we haven’t run a heatmap study since 2012.</p>
<p>In order to not spend all my time generating the heatmaps, I had to reduce the
effort involved in producing these visualizations.</p>
<p>Being a programmer, my first inclination was to <a href="https://github.com/bwinton/d3Experiments/blob/gh-pages/heatmap.scratchpad.js">write a
program</a>
to calculate them, and that sort of worked for the first version of the
heatmap, but there were some difficulties.  To collect locations for all the
elements, we had to display all the elements.</p>
<p><img alt="Firefox in the process of being customized" src="https://raw.githubusercontent.com/bwinton/d3Experiments/gh-pages/images/Darwin/HeatmapCustomize.png%20Firefox%20in%20the%20process%20of%20being%20customized."></p>
<p>Customize mode (as shown above) was an obvious choice since it shows
everything you could click on almost by definition, but it led people to think
that we weren’t showing which elements were being clicked the most, but
instead which elements people customized the most.  So that was out.</p>
<p>Next we tried putting everything in the toolbar, or the menu, but those were a
little too cluttered even without leaving room for labels, and too wide (or
too tall, in the case of the menu).</p>
<p><img alt="A shockingly busy toolbar" src="https://raw.githubusercontent.com/bwinton/d3Experiments/gh-pages/images/Darwin/HeatmapToolbar.png%20A%20shockingly%20busy%20toolbar."></p>
<p>Similarly, I couldn’t fit everything into the menu panel either.  The only
solution was to resort to some <a href="http://flyingmeat.com/acorn/">Photoshop</a>-trickery
to fit all the buttons in, but that ended up breaking the script I was using
to locate the various elements in the UI.</p>
<style>
img[alt="A surprisingly tall menu panel"] {
  width: 270px;
  height: 915px;
  margin-left: calc(50% - 135px);
}
</style>
<p><img alt="A surprisingly tall menu panel" src="https://raw.githubusercontent.com/bwinton/d3Experiments/gh-pages/images/Darwin/HeatmapMenu.png%20A%20surprisingly%20tall%20menu%20panel."></p>
<p>Since I couldn’t automatically figure out where everything was, I figured we
might as well use a nicely-laid out, partially generated image, and calculate
the positions (mostly-)manually.</p>
<p><img alt="The current version of the heatmap (Note: This is not the real data.)" src="http://weblog.latte.ca/images/blake/SampleHeatmap.png%20The%20current%20version%20of%20the%20heatmap.%20%20Note:%20This%20is%20not%20the%20real%20data."></p>
<p>I had foreseen the need for different positions for the widgets when the
project started, and so I put <a href="https://github.com/bwinton/d3Experiments/blob/gh-pages/data/Darwin/widgets.csv">the widget
locations</a>
in their own file from the start.  This meant that I could update them without
changing the code, which made it a little nicer to see what’s changed between
versions, but still required me to reload the whole page every time I changed
a position or size, which would just have taken way too long.  I needed
something that could give me much more immediate feedback.</p>
<p>Fortunately, I had recently finished watching a
<a href="https://www.youtube.com/watch?v=PFxWmjiUWII&amp;index=1&amp;list=PLI_sHchSmdCDLfLl5uTnsaRB54tDlRubK">series</a>
<a href="https://www.youtube.com/watch?v=sK6fLTJ9vf0&amp;index=1&amp;list=PLI_sHchSmdCC2Yg2IXzhGUc2V6dfZK_dV">of</a>
<a href="https://www.youtube.com/watch?v=h60j8k3SOrA&amp;list=PLI_sHchSmdCBa3CrSwobdZWU-tV_ZeaCO&amp;index=1">videos</a>
from <a href="http://enja.org/">Ian Johnson</a> (<a href="https://twitter.com/enjalot">@enjalot</a>
on twitter) where he used a tool he made called
<a href="http://tributary.io/">Tributary</a> to do some rapid prototyping of data
visualization code.  It seemed like a good fit for the quick moving around of
elements I was trying to do, and so I copied a bunch of the code and data in,
and got to work moving things around.</p>
<p>I did encounter a few problems: Tributary wasn’t functional in Firefox Nightly
(but I could use Chrome as a workaround) and occasionally sometimes trying to
move the cursor would change the value slider instead.  Even with these
glitches it only took me an hour or two to get from set-up to having all the
numbers for the final result!  And the best part is that since it's all open
source, you can take a look at
<a href="http://tributary.io/inlet/2ba87a4bc8d56f3b4cfc">the final result</a>, or
<a href="https://github.com/bwinton/d3Experiments/tree/gh-pages">fork it yourself</a>!</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../tags/heatmap/" rel="tag">heatmap</a></li>
            <li><a class="tag p-category" href="../../../../tags/mozilla/" rel="tag">mozilla</a></li>
            <li><a class="tag p-category" href="../../../../tags/tributary/" rel="tag">tributary</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../../../amy/everythingelse/resolutions2014/" rel="prev" title="New Year’s Resolutions">Previous post</a>
            </li>
            <li class="next">
                <a href="../../../random/microblog/newthoughts/" rel="next" title="New kinds of thoughts.">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer"><div style="margin-bottom: 12px">Contents © 2020         <a href="mailto:bwinton@latte.ca">Blake Winton</a>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">
<img alt="Creative Commons License BY-NC-SA" style="border-width: 0; vertical-align: bottom" src="https://licensebuttons.net/l/by-nc-sa/2.5/88x31.png"></a>
</div>
            
            
        </footer>
</div>
</div>


            <script src="../../../../assets/js/jquery.min.js"></script><script src="../../../../assets/js/popper.min.js"></script><script src="../../../../assets/js/bootstrap.min.js"></script><script src="../../../../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5805429-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
