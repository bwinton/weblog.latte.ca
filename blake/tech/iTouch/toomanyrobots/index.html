<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Too many robots!  A newbie lesson about alertView:clickedButtonAtIndex: | Blog-O!</title>
<link href="../../../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../rss.xml">
<link rel="canonical" href="https://bwinton.github.io/weblog.latte.ca/blake/tech/iTouch/toomanyrobots/">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Blake Winton">
<link rel="prev" href="../../../../amy/stuff/wishlist/" title="Things I Want, Part MMXXXVII" type="text/html">
<link rel="next" href="../../../../amy/books/_2009/0326/" title="March Books" type="text/html">
<meta property="og:site_name" content="Blog-O!">
<meta property="og:title" content="Too many robots!  A newbie lesson about alertView:clickedButtonAtIndex">
<meta property="og:url" content="https://bwinton.github.io/weblog.latte.ca/blake/tech/iTouch/toomanyrobots/">
<meta property="og:description" content="(With thanks to Bunnyhero, both for the
title, and the inspiration to get blogging again.)
As you can probably guess, if you’ve read Bunnyhero’s blog post, I recently learned that the AlertView delega">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2009-03-23T21:55:30-04:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://bwinton.github.io/weblog.latte.ca/">

            <span id="blog-title">Blog-O!</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../../../tags/index.html" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="//duckduckgo.com/" class="navbar-form pull-right">
<input type="hidden" name="sites" value="https://bwinton.github.io/weblog.latte.ca/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Too many robots!  A newbie lesson about alertView:clickedButtonAtIndex:</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2009-03-23T21:55:30-04:00" itemprop="datePublished" title="2009-03-23 21:55">2009-03-23 21:55</time></a></p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>(With thanks to <a href="http://twitter.com/bunnyhero/">Bunnyhero</a>, both for the
title, and the inspiration to get blogging again.)</p>
<p>As you can probably guess, if you’ve read Bunnyhero’s <a href="http://www.bunnyhero.org/2009/03/23/too-many-monkeys-a-newbie-lesson-about-viewdidload/">blog post</a>, I recently learned that the AlertView delegate method
<tt>alertView:clickedButtonAtIndex:</tt> can be called <em>multiple times
for one AlertView</em>, much to my surprise.</p>
<p>And here’s how I found that out.  A couple of weeks ago, I ran across a
bug in my still-in-development iPhone game.  I was displaying an alert
when the game ended, and when the user clicked “Okay” it would go to the
next level.  And it all seemed fine until one day, when instead of
clicking the “Okay” button, I hit the home button to exit the game while
the dialog was displayed, and the next time I entered the app, there
were, like, 40 robots where I was expecting 8!</p>
<p>As a favour to a <a href="http://pyre.third-bit.com/blog/">friend of mine</a> who’s
a prof, I let the bug sit until I could debug the code in front of a
room full of undergrads, as a part of <a href="https://stanley.cdf.toronto.edu/drproject/csc301-2009-01">the software engineering class</a> he teaches.
(The whole experience turned out to not only be something that I wished
I could have seen when I was an undergrad, but also something really fun
to do from the the industry-type person side of things!  Anyone who has
a laptop, and some code with a small bug that they don’t mind showing to
a bunch of students should <em>really</em> give it a try!).  Debugging the
problem led me not to the archiver/unarchiver as I was expecting, but
instead to the observation that when I hit the home button, my delegate
method was being called up to 5 times!</p>
<p>This is why I saw way too many robots, because I was advancing 4 more
levels than I should have been.  And so when I re-entered the game, it
happily put me on level 5-ish, instead of level 2.</p>
<p>The fix was fairly simple, if slightly inelegant.  I merely added in a
flag to tell me when I was handling an alert, and would only advance the
level when I thought I had popped the alert up.  (Now that I write it, I
wonder if I can set the alert’s delegate to nil when I’m done handling
it instead.  Thoughts, anyone?)</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../../../../amy/stuff/wishlist/" rel="prev" title="Things I Want, Part MMXXXVII">Previous post</a>
            </li>
            <li class="next">
                <a href="../../../../amy/books/_2009/0326/" rel="next" title="March Books">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer"><div style="margin-bottom: 12px">Contents © 2020         <a href="mailto:bwinton@latte.ca">Blake Winton</a>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">
<img alt="Creative Commons License BY-NC-SA" style="border-width: 0; vertical-align: bottom" src="https://licensebuttons.net/l/by-nc-sa/2.5/88x31.png"></a>
</div>
            
            
        </footer>
</div>
</div>


            <script src="../../../../assets/js/jquery.min.js"></script><script src="../../../../assets/js/popper.min.js"></script><script src="../../../../assets/js/bootstrap.min.js"></script><script src="../../../../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5805429-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
