<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<base href="https://bwinton.github.io/weblog.latte.ca/blake/tech/thunderbird/wherearethebugs.html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What files have the most bugs? | Blog-O!</title>
<link href="../../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="https://bwinton.github.io/weblog.latte.ca/blake/tech/thunderbird/wherearethebugs.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Blake Winton">
<link rel="prev" href="../../../amy/books/_2010/giantbookblog.html" title="Giant Book Blog, November 2010" type="text/html">
<link rel="next" href="../../../amy/everythingelse/xmas2010.html" title="Christmas 2010" type="text/html">
<meta property="og:site_name" content="Blog-O!">
<meta property="og:title" content="What files have the most bugs?">
<meta property="og:url" content="https://bwinton.github.io/weblog.latte.ca/blake/tech/thunderbird/wherearethebugs.html">
<meta property="og:description" content="I was reading Making Software
by Andy Oram and Greg Wilson, and got to the chapter about An Automated
Fault Prediction System.  It’s a pretty neat chapter, and it got me
wondering which files in the T">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2010-12-24T14:59:24-05:00">
<meta property="article:tag" content="making_software">
<meta property="article:tag" content="mozilla">
<meta property="article:tag" content="thunderbird">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://bwinton.github.io/weblog.latte.ca/">

                <span id="blog-title">Blog-O!</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../../archive.html">Archive</a>
                </li>
<li>
<a href="../../../tags/index.html">Tags</a>
                </li>
<li>
<a href="../../../rss.xml">RSS feed</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="//duckduckgo.com/" class="navbar-form pull-right">
<input type="hidden" name="sites" value="https://bwinton.github.io/weblog.latte.ca/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">What files have the most bugs?</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2010-12-24T14:59:24-05:00" itemprop="datePublished" title="2010-12-24 14:59">2010-12-24 14:59</time></a></p>
                <p class="commentline">
        
    <a href="wherearethebugs.html#disqus_thread" data-disqus-identifier="/blake/tech/thunderbird/wherearethebugs">Comments</a>


            

        </p>
</div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>I was reading <a href="http://oreilly.com/catalog/9780596808303">Making Software</a>
by Andy Oram and Greg Wilson, and got to the chapter about An Automated
Fault Prediction System.  It’s a pretty neat chapter, and it got me
wondering which files in the <a href="http://mxr.mozilla.org/comm-central/">Thunderbird code base</a> had the most bugs.  Now, I don’t have
all the info I need, but I figured an easy first pass would be to go
through the commit logs, and for each commit that started with “bug ”, add
one to the files changed in that commit.  Hmm, that sounded unintuitive.
Let me just paste (<a href="../../../static/blake/test.py">and link</a>) the code:</p>
<table class="codehilitetable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td>
<td class="code">
<pre class="code literal-block"><span></span><span class="kn">from</span> <span class="nn">mercurial</span> <span class="kn">import</span> <span class="n">ui</span><span class="p">,</span> <span class="n">hg</span>
<span class="kn">import</span> <span class="nn">operator</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="n">ext</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">"(\.c(pp)?|\.js|\.xml)$"</span><span class="p">)</span>

<span class="n">repo</span> <span class="o">=</span> <span class="n">hg</span><span class="o">.</span><span class="n">repository</span><span class="p">(</span><span class="n">ui</span><span class="o">.</span><span class="n">ui</span><span class="p">(),</span> <span class="s2">"."</span><span class="p">)</span>
<span class="n">changes</span> <span class="o">=</span> <span class="p">[</span><span class="n">repo</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">repo</span>
                   <span class="k">if</span> <span class="n">repo</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">description</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"bug "</span><span class="p">)]</span>

<span class="n">master</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">change</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">:</span>
  <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">change</span><span class="o">.</span><span class="n">files</span><span class="p">()</span> <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">f</span><span class="p">)]</span>
  <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
    <span class="n">master</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>


<span class="n">files</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="n">files</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="n">counts</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">counts</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">":"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">counts</span><span class="p">[:</span><span class="mi">10</span><span class="p">]])</span>
</pre>
</td>
</tr></table>
<p>And so, without further ado, here are the files that have been changed the
most in bug fixes, and the number of times they've been changed:</p>
<ul>
<li>mail/base/content/mailWindowOverlay.js:109</li>
<li>suite/browser/browser-prefs.js:73</li>
<li>suite/browser/navigator.js:70</li>
<li>mail/base/content/msgMail3PaneWindow.js:69</li>
<li>mail/app/profile/all-thunderbird.js:67</li>
<li>suite/common/src/nsSessionStore.js:66</li>
<li>mail/components/compose/content/MsgComposeCommands.js:60</li>
<li>mailnews/imap/src/nsImapMailFolder.cpp:56</li>
<li>suite/browser/tabbrowser.xml:53</li>
<li>mail/base/content/msgHdrViewOverlay.js:52</li>
</ul>
<hr>
<p><small>As a side note, for the <a href="http://mxr.mozilla.org/mozilla-central/">mozilla repo</a> it looks like this:</small></p>
<ul>
<li><small>js/src/jstracer.cpp:780</small></li>
<li><small>browser/base/content/browser.js:654</small></li>
<li><small>layout/base/nsCSSFrameConstructor.cpp:410</small></li>
<li><small>layout/base/nsPresShell.cpp:400</small></li>
<li><small>js/src/jsobj.cpp:399</small></li>
<li><small>browser/base/content/tabbrowser.xml:397</small></li>
<li><small>widget/src/windows/nsWindow.cpp:390</small></li>
<li><small>toolkit/components/places/src/nsNavHistory.cpp:374</small></li>
<li><small>js/src/jsinterp.cpp:345</small></li>
<li><small>js/src/jsapi.cpp:343</small></li>
</ul>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../tags/making_software.html" rel="tag">making_software</a></li>
            <li><a class="tag p-category" href="../../../tags/mozilla.html" rel="tag">mozilla</a></li>
            <li><a class="tag p-category" href="../../../tags/thunderbird.html" rel="tag">thunderbird</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../../amy/books/_2010/giantbookblog.html" rel="prev" title="Giant Book Blog, November 2010">Previous post</a>
            </li>
            <li class="next">
                <a href="../../../amy/everythingelse/xmas2010.html" rel="next" title="Christmas 2010">Next post</a>
            </li>
        </ul></nav></aside><section class="comments"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="latteblog",
            disqus_url="https://bwinton.github.io/weblog.latte.ca/blake/tech/thunderbird/wherearethebugs.html",
        disqus_title="What files have the most bugs?",
        disqus_identifier="/blake/tech/thunderbird/wherearethebugs",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="latteblog";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer"><div style="margin-bottom: 12px">Contents © 2016         <a href="mailto:bwinton@latte.ca">Blake Winton</a>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">
<img alt="Creative Commons License BY-NC-SA" style="border-width: 0; vertical-align: bottom" src="https://licensebuttons.net/l/by-nc-sa/2.5/88x31.png"></a>
</div>
            
        </footer>
</div>
</div>


            <script src="../../../assets/js/jquery.min.js"></script><script src="../../../assets/js/bootstrap.min.js"></script><script src="../../../assets/js/moment-with-locales.min.js"></script><script src="../../../assets/js/fancydates.js"></script><script src="../../../assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5805429-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
