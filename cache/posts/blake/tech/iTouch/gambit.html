<p>The command to use is:</p>
<pre class="code literal-block"><span></span>$ env <span class="nv">CC</span><span class="o">=</span>/usr/local/bin/arm-apple-darwin-gcc <span class="nv">CC_FOR_BUILD</span><span class="o">=</span>gcc ./configure --host<span class="o">=</span>mac<span class="p">;</span> make
</pre>


<p>Well, kind of.  First you do that, then you copy gsc/gsc to gsc/gsc.onboard,
then you go to a new directory, and type:</p>
<pre class="code literal-block"><span></span>$ ./configure<span class="p">;</span>make
</pre>


<p>and copy the gsc/gsc from that directory into the first directory.</p>
<p>To compile a script into an exe:</p>
<pre class="code literal-block"><span></span>$ gsc/gsc -:<span class="o">=</span>. -c euler.scm
$ gsc/gsc -:<span class="o">=</span>. -link euler.c
$ /usr/local/bin/arm-apple-darwin-gcc euler.c euler_.c -Iinclude -Llib -lgambc -o euler
</pre>


<p>It's freaking huge!</p>
<pre class="code literal-block"><span></span>$ ls -alh euler
-rwxr-xr-x   <span class="m">1</span> bwinton  bwinton  4M Jan <span class="m">23</span> 14:22 euler
$ ls -alh /WifiToggle
-rwxr-xr-x   <span class="m">1</span> bwinton  bwinton  17K Jan <span class="m">16</span> 14:07 /WifiToggle
</pre>


<p>And it's not a lot faster.
0.1643 seconds for the compiled version, as opposed to 0.1803 seconds for the interpreter. </p>
<p>But on my Mac:</p>
<pre class="code literal-block"><span></span>$ more m1.c
power_of_2 <span class="o">(</span>int x<span class="o">)</span> <span class="o">{</span> <span class="k">return</span> 1<span class="s">&lt;&lt;x; }</span>
<span class="s">$ more m2.scm</span>
<span class="s">(c-declare &quot;ex</span>tern int power_of_2 <span class="o">()</span><span class="p">;</span><span class="s2">&quot;)</span>
<span class="s2">(define pow2 (c-lambda (int) int &quot;</span>power_of_2<span class="s2">&quot;))</span>
<span class="s2">(define (twice x) (cons x x))</span>
$<span class="s2"> more m3.scm</span>
<span class="s2">(write (map twice (map pow2 &#39;(1 2 3 4)))) (newline)</span>
$<span class="s2"> gsc/gsc -:=. -link -flat -o foo.o1.c m2 m3</span>
$<span class="s2"> /usr/local/bin/arm-apple-darwin-gcc -Iinclude -bundle -D___DYNAMIC m1.c m2.c m3.c foo.o1.c -o foo.o1</span>
$<span class="s2"> ls -alh foo.o1</span>
<span class="s2">-rwxr-xr-x   1 bwinton  bwinton    13K Jan 23 14:45 foo.o1</span>
</pre>


<p>then on the iTouch,</p>
<pre class="code literal-block"><span></span># scp bwinton@latte.ca:/Users/bwinton/Programming/Bazaar/iTouch/gambc-v4_1_2/foo.o1 .
# gsi foo.o1
((2 . 2) (4 . 4) (8 . 8) (16 . 16))
# gsi
Gambit v4.1.2

&gt; (load &quot;foo&quot;)
((2 . 2) (4 . 4) (8 . 8) (16 . 16))
&quot;/private/var/root/foo.o1&quot;
&gt; (twice 5)
(5 . 5)
&gt; (pow2 10)
1024
</pre>