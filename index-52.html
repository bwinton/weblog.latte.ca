<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="A weblog for latte.ca">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Blog-O! (old posts, page 52) | Blog-O!</title>
<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="assets/css/code.css" rel="stylesheet" type="text/css">
<link href="assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="assets/css/theme.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://bwinton.github.io/weblog.latte.ca/index-52.html">
<link rel="prev" href="index-53.html" type="text/html">
<link rel="next" href="index-51.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://bwinton.github.io/weblog.latte.ca/">

                <span id="blog-title">Blog-O!</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="tags/index.html">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS feed</a>

                
            </li>
</ul>
<!-- Custom search --><form method="get" id="search" action="//duckduckgo.com/" class="navbar-form pull-right">
<input type="hidden" name="sites" value="https://bwinton.github.io/weblog.latte.ca/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="amy/motion/nope.html" class="u-url">Derailed</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Amy Brown</span></p>
            <p class="dateline"><a href="amy/motion/nope.html" rel="bookmark"><time class="published dt-published" datetime="2009-02-24T22:52:10-05:00" itemprop="datePublished" title="2009-02-24 22:52">2009-02-24 22:52</time></a></p>
                <p class="commentline">
        
    <a href="amy/motion/nope.html#disqus_thread" data-disqus-identifier="/amy/motion/nope">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Well.  Didn't take long for that train to come off the tracks.
I haven't gone running since last time I posted, which was about a 
century ago.  First I got sick, then once I was better it was
all icy and cold, and then I just couldn't carve out a good
time.  Augh.</p>
<p>Ah well.  Reset.  Try again.  And again and again and again.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="amy/girls/valentines.html" class="u-url">Long Weekend Report</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Amy Brown</span></p>
            <p class="dateline"><a href="amy/girls/valentines.html" rel="bookmark"><time class="published dt-published" datetime="2009-02-18T22:34:15-05:00" itemprop="datePublished" title="2009-02-18 22:34">2009-02-18 22:34</time></a></p>
                <p class="commentline">
        
    <a href="amy/girls/valentines.html#disqus_thread" data-disqus-identifier="/amy/girls/valentines">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>We just came off a long weekend - Friday was a PA
Day (which means school is closed for those of you
who aren't from 'round here), and Monday was
"Family Day", a merciful and much-needed mid-winter
Ontario statutory holiday.  The weekend was full;
Friday the girls and I got together with friends.
Saturday we had <a href="http://www.musictogether.com/">music class</a>,
and then Delphine, Blake and I left Cordelia with Auntie
Morgan and Uncle Erik, and headed down to 
The Beaches for a birthday party for one of Delphine's
classmates.  While she was partying, we went to Dufflet
and enjoyed a tasty slice of cake while an orange and
white cat had a large and, I can only assume, satisfying 
poo in the garden outside the window.</p>
<p>It was great to hang out with Delphine by herself
for a while.  Both girls are really charming by 
themselves: Delphine
is thoughtful and interesting, Cordelia is intense
and funny.  Together they are often irritating,
to each other and thus to us.  So to take a nice long
transit ride with Delphine and get to hang out with
her and see the city was a real treat.  (How old do
you have to be before the view from the Bloor Street 
Viaduct stops blowing your mind?  Older than 
thirty-three, anyway.)</p>
<p>After the birthday party we came back uptown and
dropped Delphine off at Baba and Zaida's, with 
Cordelia, for a sleepover.  Then we went out to 
a movie!  We saw <em>Coraline</em>, in 3D.  (The movie was
great but the 3D was gratuitous.)</p>
<p>Sunday we slept in, then went in search of breakfast.
On the way home we picked up some groceries, and 
then relaxed for an hour or so before the girls came
home.  Later that day Kat came over, and the whole
family joined us for Sunday dinner.  After the girls
were in bed, Kat and Blake and I watched every 
<em>Being Erica</em> so far.  (Conclusion: good for now,
but Erica is going to have to stop saying stupid
things if she's going to keep our sympathies.  Moving
the plot along by making your protagonist repeatedly
screw up is lazy writing.)</p>
<p>Kat slept over, and the next morning we went skating
together.  In addition to her already-dizzying array
of talents and accomplishments, Kat is a Can-Skate
instructor and figure skater, so she taught
both Delphine and me some cool tricks.  I now have
muscle aches where I wasn't previously aware I had
muscles.</p>
<p>Kat headed home in the afternoon (after a long
and nearly fruitless search for an open grocery store),
and the weekend wound down quietly.</p>
<hr>
<p>Going out to see a movie was a nice treat, but the 
best part of our date was talking to
Blake before the movie, and on the way home, and 
the next morning when we went out for breakfast.
It was exactly like we were before the girls were
born, a relaxed, easy repartee.  We talked about all
kinds of things, we laughed at each other's jokes,
we worked on the cryptic and teased each other.
I was literally
shocked at how happy I was to be away from the children.
As I alluded to above, the girls have been a little
annoying lately and I guess it's been making me 
tenser than I realized.  </p>
<p>No, it's worse than that.  I felt <em>more like myself</em>
when I was away from the girls.  I felt like I was
the real me, the me who has a tidy
house and isn't mad all the time, the me who
talks to her husband about something other than
tomorrow's agenda and who is going to give up what
in order to take somebody somewhere.</p>
<p>I don't want to be one of
those mothers who is delighted to get away from
their kids!  I love my kids!  They are charming and
clever and fun.  I'm just overwhelmed by
them - five-and-a-half-years of almost non-stop
childcare is a lot. Maybe next year when Delphine 
is in school five hours a day, and Cordelia is in 
school half-days
I will have enough breathing space that I can properly
enjoy their company.  I want to like being with my kids, and
I want to feel normal when I'm with them, not
all stressed and crabby and resentful.  </p>
<p>But in the meantime, thank goodness for sleepovers.  No; 
thank Baba!</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="blake/random/seventhings.html" class="u-url">Seven Things You Probably Didn’t Know About Me</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="blake/random/seventhings.html" rel="bookmark"><time class="published dt-published" datetime="2009-02-18T21:30:57-05:00" itemprop="datePublished" title="2009-02-18 21:30">2009-02-18 21:30</time></a></p>
                <p class="commentline">
        
    <a href="blake/random/seventhings.html#disqus_thread" data-disqus-identifier="/blake/random/seventhings">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>My life, such as it is, is pretty much an open book.  I’m not a very
complicated person, so I don’t know if I can find seven things that the
average reader of this blog probably doesn’t know about me.</p>
<p>Still, that’s no reason not to try.  So, here we go.</p>
<ol>
<li>
<p>I’ve had two jobs that didn’t pay me.  After the first, I swore that if
   an employer didn’t pay me again, I would quit, but this last time they
   laid me off before I found out that I wasn’t getting paid.  The most
   recent company swears that they’re trying to get me my money, but I’m
   not going to hold my breath.</p>
</li>
<li>
<p>I hated country music from the first time I heard Billy Ray (father of
   Miley) Cyrus until Elizabeth Campbell sent me a CD full of the good
   stuff.  So now the only kind of music I don’t like is “New Country”.
   And Schönberg.  <em>Der Mondfleck</em> sucks.</p>
</li>
<li>
<p>I know enough Visual Basic to write a compiler for it, but you will
   never <em>ever</em> see it on any of my resumes.  <em>Ever</em>!  My policy is to only
   put on my resume things that I would enjoy working with on a day-to-day
   basis, and VB definitely isn’t one of those things.</p>
</li>
<li>
<p>I am almost every link but for one in the first 5 pages of Google
   results for “Blake Winton”.  I guess that’s one of the benefits of being
   on the Internet for 17 years.  (Well, kinda.  Amy has been online as
   long as I have, but doesn’t show up until page 8 of the results for her
   name, mainly because of the Unicorns-riding-fairies artist who shares
   her name.)</p>
</li>
<li>
<p>There’s a quarter of a cow in our downstairs freezer.  Well, quite a bit
   less now that Amy and I have eaten a bunch of it.  We split half a cow
   with some friends, and it arrived pre-chopped up, so we’ve been having
   at least one beef dinner per week, and often two.</p>
</li>
<li>
<p>I download, watch, and enjoy, American Idol.  Less so, now that we’re
   out of the “Simon says snarky things to really bad singers”, and into
   the “Simon says snarky things to Ryan”, but it’s still enjoyable.  (Go
   Alexis Grace!)</p>
</li>
<li>
<p>My first hard drive wasn’t actually 5 Meg, as I like to claim.  My
   father bought two hard drives, and took the 5 Meg one to the office,
   leaving the 10 Meg one at home.  The story about having 11 Meg of RAM is
   true, though.</p>
</li>
</ol>
<p>Okay, that’s my seven.  There were a few more I could think of, but I’m
glad <a href="http://blog.codekills.net/archives/50-Seven-Things.html">David</a>
didn’t run across the 25-things-about-you version, since then I would have
had no choice but to resort to things you probably don’t want to know about
me.</p>
<p>In the tradition of disbelieving in bad luck, I will now tag no-one, thus
breaking the chain.  (Although, if any of you are feeling verbose, feel
free to pick up the meme and post a list of your own.)</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="blake/tech/couchinvoice.html" class="u-url">Creating invoices with CouchDB.</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="blake/tech/couchinvoice.html" rel="bookmark"><time class="published dt-published" datetime="2009-02-11T22:10:21-05:00" itemprop="datePublished" title="2009-02-11 22:10">2009-02-11 22:10</time></a></p>
                <p class="commentline">
        
    <a href="blake/tech/couchinvoice.html#disqus_thread" data-disqus-identifier="/blake/tech/couchinvoice">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>A while ago I (and the rest of the company I worked for) was laid off, so I
was forcibly thrust into the world of consulting.  It’s been quite a
change, keeping track of my hours and sending out invoices for the work I
do.  And it’s that second point that I want to talk a little more about.</p>
<p>Perhaps I’m too picky, but there seemed to be a fatal flaw with all the
online invoicing tools I tried.  One didn’t allow enough clients for me on
the free plan.  (Yes, I am that cheap, especially when I’ve just been laid
off.)  Another would have allowed the client to dispute the invoice.  I
mean, really.  This is the invoice.  You don’t get to dispute it.  Or at
least, I don’t particularly want to make it easy for you.  So I ended up
using an <a href="http://1timetracking.com/">online time tracker</a>, and left the
invoice creation step until later.</p>
<p>Well, later rolled around, and I really kinda wanted to get paid, so I
downloaded a report of my hours <a href="http://1timetracking.com/#feature_tour">as a csv file</a>, and whipped up a quick Python
script to parse it, and import it into a locally running copy of CouchDB.</p>
<p>The python script looked like this:</p>
<table class="codehilitetable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td>
<td class="code">
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">couchdb.client</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">path</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">couchdb</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">Server</span><span class="p">(</span><span class="s1">'http://localhost:5984/'</span><span class="p">)</span>
<span class="k">if</span> <span class="s1">'timelog'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">server</span><span class="p">:</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s1">'timelog'</span><span class="p">)</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">server</span><span class="p">[</span><span class="s1">'timelog'</span><span class="p">]</span>
<span class="k">print</span> <span class="n">db</span>

<span class="k">def</span> <span class="nf">cleanup</span><span class="p">():</span>
    <span class="c1"># Clear out old rows.</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">db</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"_"</span><span class="p">):</span>
            <span class="k">del</span> <span class="n">db</span><span class="p">[</span><span class="n">row</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">input</span><span class="p">(</span> <span class="n">docName</span> <span class="p">):</span>
    <span class="k">print</span> <span class="n">docName</span>
    <span class="nb">input</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span> <span class="n">docName</span> <span class="p">)</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span> <span class="nb">input</span> <span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
        <span class="n">row</span><span class="p">[</span><span class="s1">'Import Doc Name'</span><span class="p">]</span> <span class="o">=</span> <span class="n">docName</span>
        <span class="n">row</span><span class="p">[</span><span class="s1">'Import Doc Row'</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="k">if</span> <span class="s1">'Client Name'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
          <span class="n">row</span><span class="p">[</span><span class="s1">'Client Name'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Client1"</span>
        <span class="n">key</span> <span class="o">=</span> <span class="s2">"</span><span class="si">%s</span><span class="s2">_</span><span class="si">%03d</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">docName</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">print</span> <span class="s2">"  "</span><span class="p">,</span> <span class="n">key</span>
        <span class="n">db</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">cleanup</span><span class="p">()</span>
<span class="n">base</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="s2">"/Users/bwinton/Documents/Client1"</span><span class="p">)</span>
<span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">base</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s2">"*.csv"</span><span class="p">):</span>
    <span class="nb">input</span><span class="p">(</span> <span class="nb">file</span> <span class="p">)</span>
</pre>
</td>
</tr></table>
<p>Pretty easy, eh?  After that, I had to create a couple of CouchDB views:</p>
<table class="codehilitetable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre></div></td>
<td class="code">
<pre class="code literal-block"><span></span><span class="c1">// hoursPerDay</span>
<span class="nx">map</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">key</span> <span class="o">=</span> <span class="p">[</span>
    <span class="nx">doc</span><span class="p">[</span><span class="s1">'Employee name'</span><span class="p">],</span>
    <span class="nx">doc</span><span class="p">[</span><span class="s1">'Client Name'</span><span class="p">],</span>
    <span class="nx">doc</span><span class="p">[</span><span class="s1">'Date of work'</span><span class="p">],</span> 
  <span class="p">];</span>
  <span class="nx">emit</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">doc</span> <span class="p">);</span>
<span class="p">};</span>
<span class="nx">reduce</span><span class="o">=</span><span class="kd">function</span> <span class="p">(</span><span class="nx">tag</span><span class="p">,</span> <span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
  <span class="nx">temp</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">for</span><span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">sum</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="s1">'Time in hours'</span><span class="p">]);</span>
    <span class="nx">temp</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'Order'</span><span class="o">:</span><span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="s1">'Import Doc Row'</span><span class="p">],</span>
      <span class="s1">'Description'</span><span class="o">:</span><span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="s1">'Description'</span><span class="p">],</span>
      <span class="s1">'Time'</span><span class="o">:</span><span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="s1">'Time in hours'</span><span class="p">],</span>
      <span class="s1">'Type'</span><span class="o">:</span><span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="s1">'Activity Type'</span><span class="p">],</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">temp</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="s1">'Order'</span><span class="p">])</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="s1">'Order'</span><span class="p">])</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span>
  <span class="p">})</span>
  <span class="k">return</span> <span class="p">[</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">temp</span><span class="p">];</span>
<span class="p">};</span>

<span class="c1">// totalHours</span>
<span class="c1">// This view is just to save me re-calculating this value every time</span>
<span class="c1">// I call the page, because it should only change when we add a new</span>
<span class="c1">// document.</span>
<span class="nx">map</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">key</span> <span class="o">=</span> <span class="p">[</span>
    <span class="nx">doc</span><span class="p">[</span><span class="s1">'Employee name'</span><span class="p">],</span>
    <span class="nx">doc</span><span class="p">[</span><span class="s1">'Client Name'</span><span class="p">],</span>
    <span class="nx">doc</span><span class="p">[</span><span class="s1">'Date of work'</span><span class="p">],</span> 
  <span class="p">];</span>
  <span class="nx">emit</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">doc</span><span class="p">[</span><span class="s1">'Time in hours'</span><span class="p">])</span> <span class="p">);</span>
<span class="p">};</span>
<span class="nx">reduce</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">keys</span><span class="p">,</span> <span class="nx">values</span><span class="p">,</span> <span class="nx">rereduce</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">sum</span><span class="p">(</span> <span class="nx">values</span> <span class="p">)</span>
  <span class="p">{</span>
    <span class="nx">retval</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="nx">retval</span> <span class="o">+=</span> <span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">retval</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">sum</span><span class="p">(</span><span class="nx">values</span><span class="p">);</span>
<span class="p">};</span>
</pre>
</td>
</tr></table>
<p>it was a quick snippet of HTML:</p>
<table class="codehilitetable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td>
<td class="code">
<pre class="code literal-block"><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Time Log<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">href</span><span class="o">=</span><span class="s">"style/blueprint.css"</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/css"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
      <span class="c1">// Set up some variables.</span>
      <span class="nx">months</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">"2009-02"</span> <span class="p">]</span>
      <span class="nx">users</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"Blake Winton"</span><span class="o">:</span><span class="p">{</span>
          <span class="nx">invoiceDates</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">"March 1st, 2009."</span><span class="p">],</span>
          <span class="nx">address</span> <span class="o">:</span> <span class="p">[</span><span class="s2">"16 Forman Avenue"</span><span class="p">,</span>
                     <span class="s2">"Toronto, ON, M4S 2R2"</span><span class="p">,</span>
                     <span class="s2">"bwinton@latte.ca"</span><span class="p">]</span>
        <span class="p">}};</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"script/bwTimesheet.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"prepend-1"</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Blake Winton<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
    16 Forman Avenue<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
    Toronto, ON, M4S 2R2<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
    bwinton@latte.ca<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"prepend-1"</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Invoice Number:<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
      XX-<span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"invoiceNum"</span><span class="p">&gt;</span>000<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Date:<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"invoiceDate"</span><span class="p">&gt;</span>March 5th, 1973.<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"prepend-1 span-1"</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;</span>To:<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"span-22 last"</span><span class="p">&gt;</span>
    Client Name<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
    16 Client Address<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"span-24"</span><span class="p">&gt;</span><span class="ni">&amp;nbsp;</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"timesheet"</span><span class="p">&gt;</span>Timesheet loading...<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"summary"</span><span class="p">&gt;</span>Summary loading...<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre>
</td>
</tr></table>
<p>and Javascript:</p>
<table class="codehilitetable"><tr>
<td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131</pre></div></td>
<td class="code">
<pre class="code literal-block"><span></span><span class="c1">// Get a default month, if one wasn’t passed in.</span>
<span class="nx">month</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'month'</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">month</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'undefined'</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nx">month</span> <span class="o">=</span> <span class="s2">"0"</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">month</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">month</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span> <span class="nx">month</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">month</span> <span class="o">&gt;=</span> <span class="nx">months</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span>
<span class="p">{</span>
  <span class="nx">month</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">invoiceNumInt</span> <span class="o">=</span> <span class="nx">month</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
<span class="nx">month</span> <span class="o">=</span> <span class="nx">months</span><span class="p">[</span><span class="nx">month</span><span class="p">];</span>

<span class="c1">// Get a default user, if one wasn’t passed in.</span>
<span class="c1">// Yeah, I’ve defaulted it to me.  ;)</span>
<span class="nx">user</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'user'</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'undefined'</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nx">user</span> <span class="o">=</span> <span class="s2">"Blake Winton"</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">user</span> <span class="k">in</span> <span class="nx">users</span><span class="p">))</span>
<span class="p">{</span>
  <span class="nx">user</span> <span class="o">=</span> <span class="s2">"Blake Winton"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Figure out when to start and end the invoice.</span>
<span class="nx">invoiceDates</span> <span class="o">=</span> <span class="nx">users</span><span class="p">[</span><span class="nx">user</span><span class="p">].</span><span class="nx">invoiceDates</span><span class="p">;</span>
<span class="nx">invoiceDateStr</span> <span class="o">=</span> <span class="nx">invoiceDates</span><span class="p">[</span><span class="nx">invoiceNumInt</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
<span class="nx">start</span> <span class="o">=</span> <span class="p">[</span><span class="nx">user</span><span class="p">,</span> <span class="nx">client</span><span class="p">,</span> <span class="nx">month</span><span class="o">+</span><span class="s2">"-01"</span><span class="p">];</span>
<span class="nx">end</span> <span class="o">=</span> <span class="p">[</span><span class="nx">user</span><span class="p">,</span> <span class="nx">client</span><span class="p">,</span> <span class="nx">month</span><span class="o">+</span><span class="s2">"-31"</span><span class="p">];</span>

<span class="c1">// Why, oh why, doesn’t Javascript have printf?</span>
<span class="kd">function</span> <span class="nx">zeroPad</span><span class="p">(</span><span class="nx">num</span><span class="p">,</span><span class="nx">count</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kd">var</span> <span class="nx">numZeropad</span> <span class="o">=</span> <span class="nx">num</span> <span class="o">+</span> <span class="s1">''</span><span class="p">;</span>
  <span class="k">while</span><span class="p">(</span><span class="nx">numZeropad</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">count</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nx">numZeropad</span> <span class="o">=</span> <span class="s2">"0"</span> <span class="o">+</span> <span class="nx">numZeropad</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">numZeropad</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Update the header, with the address, invoice number, and date.</span>
<span class="kd">function</span> <span class="nx">updateHeader</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">address</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#address"</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
  <span class="nx">address</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="s2">"&lt;b&gt;"</span><span class="o">+</span><span class="nx">user</span><span class="o">+</span><span class="s2">"&lt;/b&gt;&lt;br/&gt;"</span> <span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">users</span><span class="p">[</span><span class="nx">user</span><span class="p">].</span><span class="nx">address</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">users</span><span class="p">[</span><span class="nx">user</span><span class="p">].</span><span class="nx">address</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="nx">address</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">line</span> <span class="o">+</span> <span class="s2">"&lt;br/&gt;"</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">invoiceNum</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#invoiceNum"</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
  <span class="nx">invoiceNum</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">zeroPad</span><span class="p">(</span> <span class="nx">invoiceNumInt</span><span class="p">,</span> <span class="mi">3</span> <span class="p">));</span>

  <span class="kd">var</span> <span class="nx">invoiceDate</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#invoiceDate"</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
  <span class="nx">invoiceDate</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">invoiceDateStr</span> <span class="p">);</span>
  <span class="nx">updateTimesheet</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Update the timesheet, with hours and descriptions.</span>
<span class="kd">function</span> <span class="nx">updateTimesheet</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">timesheet</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#timesheet"</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">dbs</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">couch</span><span class="p">.</span><span class="nx">db</span><span class="p">(</span><span class="s2">"timelog"</span><span class="p">).</span><span class="nx">view</span><span class="p">(</span><span class="s2">"invoice/hoursPerDay"</span><span class="p">,{</span>
    <span class="nx">group</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">startkey</span><span class="o">:</span> <span class="nx">start</span><span class="p">,</span>
    <span class="nx">endkey</span><span class="o">:</span> <span class="nx">end</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">table</span> <span class="o">=</span> <span class="s2">"&lt;div class='span-20 prepend-1 last'&gt;&lt;table class='timelog'&gt;"</span><span class="p">;</span>
      <span class="nx">rowNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">response</span> <span class="o">=</span> <span class="nx">r</span><span class="p">[</span><span class="s1">'rows'</span><span class="p">]</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">record</span> <span class="o">=</span> <span class="nx">response</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="nx">record</span><span class="p">[</span><span class="s1">'key'</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">record</span><span class="p">[</span><span class="s1">'value'</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nx">record</span><span class="p">[</span><span class="s1">'value'</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">table</span> <span class="o">+=</span> <span class="s2">"&lt;tr class='row"</span><span class="o">+</span><span class="nx">rowNum</span><span class="o">+</span><span class="s2">"'&gt;&lt;td&gt;"</span> <span class="o">+</span>
        <span class="nx">date</span> <span class="o">+</span> <span class="s2">"&lt;/td&gt;&lt;td&gt;"</span> <span class="o">+</span>
        <span class="nx">total</span> <span class="o">+</span> <span class="s2">"h&lt;/td&gt;"</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">entries</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span>
        <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">j</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
          <span class="p">{</span>
            <span class="nx">table</span> <span class="o">+=</span> <span class="s2">"&lt;tr class='row"</span><span class="o">+</span><span class="nx">rowNum</span><span class="o">+</span><span class="s2">"'&gt;&lt;td/&gt;&lt;td/&gt;"</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">table</span> <span class="o">+=</span> <span class="s2">"&lt;td&gt;"</span> <span class="o">+</span> <span class="nx">entries</span><span class="p">[</span><span class="nx">j</span><span class="p">][</span><span class="s1">'Time'</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"h - "</span> <span class="o">+</span>
            <span class="nx">entries</span><span class="p">[</span><span class="nx">j</span><span class="p">][</span><span class="s1">'Description'</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"&lt;/td&gt;&lt;/tr&gt;"</span><span class="p">;</span>
          <span class="nx">rowNum</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
          <span class="nx">rowNum</span> <span class="o">%=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">table</span> <span class="o">+=</span> <span class="s2">"&lt;/table&gt;&lt;/div&gt;"</span><span class="p">;</span>
      <span class="nx">timesheet</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">table</span> <span class="p">);</span>
      <span class="nx">updateSummary</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">};</span>

<span class="c1">// And finally, update the important stuff.</span>
<span class="c1">// The total hours, rate, and amount owed.</span>
<span class="kd">function</span> <span class="nx">updateSummary</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">dbs</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">couch</span><span class="p">.</span><span class="nx">db</span><span class="p">(</span><span class="s2">"timelog"</span><span class="p">).</span><span class="nx">view</span><span class="p">(</span><span class="s2">"invoice/totalHours"</span><span class="p">,{</span>
    <span class="nx">startkey</span><span class="o">:</span> <span class="nx">start</span><span class="p">,</span>
    <span class="nx">endkey</span><span class="o">:</span> <span class="nx">end</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">summary</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#summary"</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
      <span class="nx">content</span> <span class="o">=</span> <span class="s2">"&lt;p class='span-20 prepend-1 last'&gt;"</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">r</span><span class="p">[</span><span class="s1">'rows'</span><span class="p">].</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span>
      <span class="p">{</span>
        <span class="nx">content</span> <span class="o">+=</span> <span class="s2">"No data available."</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span>
      <span class="p">{</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">r</span><span class="p">[</span><span class="s1">'rows'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">'value'</span><span class="p">];</span>
        <span class="nx">content</span> <span class="o">+=</span> <span class="s2">"&lt;b&gt;Total hours:&lt;/b&gt; "</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">"&lt;br/&gt;"</span> <span class="o">+</span>
          <span class="s2">"&lt;b&gt;Rate:&lt;/b&gt; $"</span> <span class="o">+</span> <span class="nx">rate</span> <span class="o">+</span> <span class="nx">currency</span> <span class="o">+</span><span class="s2">"/hour.&lt;br/&gt;"</span> <span class="o">+</span>
          <span class="s2">"&lt;b&gt;Sub-total:&lt;/b&gt; $"</span> <span class="o">+</span> <span class="p">(</span><span class="nx">value</span><span class="o">*</span><span class="nx">rate</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"&lt;br/&gt;"</span> <span class="o">+</span>
          <span class="s2">"&lt;b&gt;Tax (GST @ 5%):&lt;/b&gt; $"</span> <span class="o">+</span> <span class="p">(</span><span class="nx">value</span><span class="o">*</span><span class="mi">5</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"&lt;br/&gt;"</span> <span class="o">+</span>
          <span class="s2">"&lt;b&gt;Total Payable:&lt;/b&gt; $"</span> <span class="o">+</span> <span class="p">(</span><span class="nx">value</span><span class="o">*</span><span class="p">(</span><span class="nx">rate</span><span class="o">+</span><span class="mi">5</span><span class="p">)).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"&lt;br/&gt;"</span>
          <span class="p">}</span>
          <span class="nx">content</span> <span class="o">+=</span> <span class="s2">"&lt;/p&gt;"</span><span class="p">;</span>
          <span class="nx">summary</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">content</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="c1">// When the document is ready, kick off the updates.</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">updateHeader</span><span class="p">();</span>
<span class="p">});</span>
</pre>
</td>
</tr></table>
<p>And we’re done.  Not to sound too much like an infomercial, but with <a href="http://jquery.com/">JQuery</a>, <a href="http://www.blueprintcss.org/">Blueprint</a>, <a href="http://couchdb.apache.org/">CouchDB</a>, and <a href="http://www.python.org/">Python</a>, it took me
only 255 lines of code to get a decent-enough-quality invoice that I could save
it as a PDF, send to the client, and get paid.  In fact, the client liked it
enough (or just wanted things to be standard enough) that they asked that the
other consultant on the project use the same template, so I had to spend some
time taking my original invoice script and editing it to support more than one
user.  Either way, I would call it a success.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="amy/news/mmr.html" class="u-url">MMR Study Fixed</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Amy Brown</span></p>
            <p class="dateline"><a href="amy/news/mmr.html" rel="bookmark"><time class="published dt-published" datetime="2009-02-10T22:19:27-05:00" itemprop="datePublished" title="2009-02-10 22:19">2009-02-10 22:19</time></a></p>
                <p class="commentline">
        
    <a href="amy/news/mmr.html#disqus_thread" data-disqus-identifier="/amy/news/mmr">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Just a <a href="http://www.rationalmoms.com/2009/02/09/mmr-autism-the-books-were-cooked/">quick link</a> to a blog post on Rational Moms about how
the data in that one study which linked the MMR vaccine
to autism was manipulated.</p>
<p>I hope the lives of those two children weigh heavily on
Dr Wakefield's conscience.  I bet they don't.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="amy/news/rancourt.html" class="u-url">Professor Banned From Campus For... What?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Amy Brown</span></p>
            <p class="dateline"><a href="amy/news/rancourt.html" rel="bookmark"><time class="published dt-published" datetime="2009-02-10T14:50:23-05:00" itemprop="datePublished" title="2009-02-10 14:50">2009-02-10 14:50</time></a></p>
                <p class="commentline">
        
    <a href="amy/news/rancourt.html#disqus_thread" data-disqus-identifier="/amy/news/rancourt">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>There was an article in yesterday's Globe about a
<a href="http://www.theglobeandmail.com/servlet/story/RTGAM.20090206.wprof06/BNStory/National/home">University of Ottawa professor locked out of his office and banned from
campus</a>.  The article implies that he
was suspended from teaching because of his unorthodox
teaching methods: he doesn't like to give grades,
he altered course curriculum with student input.</p>
<blockquote>
<blockquote>
<p>It was not his job, as he explained later, to rank their skills for future employers, or train them to be “information transfer machines,” regurgitating facts on demand. Released from the pressure to ace the test, they would become “scientists, not automatons,” he reasoned.</p>
</blockquote>
</blockquote>
<p>Which, frankly, to me, sounds freaking fantastic.  It's
exactly what <a href="http://www.alfiekohn.org/topics.htm">Alfie Kohn</a>
 recommends: student-led learning,
no evaluations.  </p>
<p>I'm pretty sure we're not getting the whole story,
though.  A quick Google shows that this guy is a
bit of a pain in the ass, so maybe the university has
other reasons to can him.  It would sure be nice if
they would step and say so, if they do.  In the meantime,
it seems like they're being idiots.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="amy/whingeing/sick.html" class="u-url">Sick</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Amy Brown</span></p>
            <p class="dateline"><a href="amy/whingeing/sick.html" rel="bookmark"><time class="published dt-published" datetime="2009-02-06T10:31:57-05:00" itemprop="datePublished" title="2009-02-06 10:31">2009-02-06 10:31</time></a></p>
                <p class="commentline">
        
    <a href="amy/whingeing/sick.html#disqus_thread" data-disqus-identifier="/amy/whingeing/sick">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Cordelia and I are sick.  According to the
<a href="http://www.latte.ca/pics/2006/0420/11-w-symptoms.jpg">Venn diagram of misery</a>
I have either a cold with muscle pain, fever and headache,
or a flu with sneezing and runny nose.  Maybe I have
a cold and flu simultaneously!  Whatever I have it's 
mild enough to allow me to get up and make myself
useful while still being severe enough to make me
miserable.</p>
<p>I kept Cordelia home from school today because she
woke up during the night all hot and coughing, but
now that she's awake she seems more or less fine.
I'm sure she will hit a brick wall sooner or later.
Hopefully I can get someone to pick Delphine up from
school so Cordelia can have a nice long nap.</p>
<p>Now I'm going to set the children up with the obligatory
Sick Day TV.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="blake/tech/vim.html" class="u-url">Home again…</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Blake Winton</span></p>
            <p class="dateline"><a href="blake/tech/vim.html" rel="bookmark"><time class="published dt-published" datetime="2009-02-02T15:48:35-05:00" itemprop="datePublished" title="2009-02-02 15:48">2009-02-02 15:48</time></a></p>
                <p class="commentline">
        
    <a href="blake/tech/vim.html#disqus_thread" data-disqus-identifier="/blake/tech/vim">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>A while ago, I downloaded Aquamacs, an emacs port for OSX, and tried
to switch to it as my default editor.  I mainly did it because I
wanted an editor I could add functionality to, à la <a href="http://steve.yegge.googlepages.com/effective-emacs">Steve Yegge</a>.  I used it for a
while, and got fairly proficient at it.  There were a lot of things
about it I really liked, like the <a href="http://jblevins.org/projects/markdown-mode/">Markdown mode</a>, and the ability to edit
files <a href="http://jeremy.zawodny.com/blog/archives/000983.html">on a remote host</a>, and the way I
could write small functions in <a href="http://www.gnu.org/software/emacs/manual/html_mono/elisp.html">elisp</a> and use
them to make me more productive.</p>
<p>But while it worked, and worked well, I didn’t really write all that
much extra elisp, and whenever I did, I didn’t really enjoy it.  So
the other day, when I found myself <a href="http://weblog.jamisbuck.org/2005/4/10/text-editing-dilemma">reading a weblog</a> about the
lack of a good graphical text editor on OSX, I found myself agreeing
with him.  So when I read <a href="http://weblog.jamisbuck.org/2008/10/10/coming-home-to-vim">a later article</a> on how the
author had finally switched back to vim, I thought that I might give
vim another chance.</p>
<p>Well, it turns out that vim is actually pretty close to a perfect text
editor for me.  It’s got <a href="http://plasticboy.com/markdown-vim-mode/">Markdown support</a>, <a href="http://www.petersblog.org/node/466">remote file editing</a>, and not only can I write
functions for it, I can <a href="http://www.vim.org/htmldoc/if_pyth.html">write them</a> in
<a href="http://python.org/">Python</a>!  As an example, here’s Steve Yegge’s
blog-check function in vim/python:</p>
<table class="codehilitetable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td>
<td class="code">
<pre class="code literal-block"><span></span><span class="k">function</span><span class="p">!</span> BlogCheck<span class="p">()</span>
  <span class="k">python</span> <span class="o">&lt;&lt;</span> END
<span class="p">:::</span><span class="n">python</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">vim</span>
<span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span> <span class="s2">r"\s"</span> <span class="p">)</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">vim</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">buffer</span><span class="p">:</span>
  <span class="n">line</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span> <span class="s2">""</span><span class="p">,</span> <span class="n">line</span> <span class="p">)</span>
  <span class="n">count</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="k">if</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">5000</span><span class="p">:</span>
  <span class="n">message</span> <span class="o">=</span> <span class="s2">"Okay so far"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">message</span> <span class="o">=</span> <span class="s2">"Dude, too long"</span>
<span class="k">print</span> <span class="s2">"</span><span class="si">%s</span><span class="s2">:  </span><span class="si">%d</span><span class="s2"> chars, </span><span class="si">%d</span><span class="s2"> words"</span> <span class="o">%</span> <span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">count</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span>
<span class="p">:::</span><span class="n">vim</span>
END
<span class="k">endfunction</span>
</pre>
</td>
</tr></table>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="cordelia/snowball.html" class="u-url">A Story of One Girl and Her Dirty Chunk of Snow</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Amy Brown</span></p>
            <p class="dateline"><a href="cordelia/snowball.html" rel="bookmark"><time class="published dt-published" datetime="2009-02-02T14:51:21-05:00" itemprop="datePublished" title="2009-02-02 14:51">2009-02-02 14:51</time></a></p>
                <p class="commentline">
        
    <a href="cordelia/snowball.html#disqus_thread" data-disqus-identifier="/cordelia/snowball">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Cordelia is a pretty compassionate kid.  She always wants
you to feel good; one of her most common phrases is,
"Don't worry!"  She's always doling out hugs, and kisses.</p>
<p>Sometimes the love goes to far, though.  On the way home
from taking Delphine to schol, Cordelia picked up a big 
ol' hunk of dirty snow, big enough that she needed two
arms to carry it.  I said, "What are you gonna do with
that big dirty hunk of snow?"</p>
<p>"I'm gonna throw it!"</p>
<p>"Who are you going to throw it at?"</p>
<p>"No-one!"  You can see who has the sense in this family.</p>
<p>"No, it's not nice to throw things at people.  So what
are you going to throw it at?"</p>
<p>"The ground!"  She stopped, planted herself firmly and
threw the chunk of snow down where it broke into a big
chunk, some smaller chunks and some slush.</p>
<p>"Are you going to take a piece?"</p>
<p>"Yeah!"  She picked out one of the smaller pieces and off
we went.  As we walked she was talking to herself, constructing
some kind of narrative for this piece of snow; she's big
on anthropomorphising.  I wasn't really paying attention
so I didn't catch the details.</p>
<p>After a block she said, "The snowball is lonely!  He wants
his daddy!  Can we go back and put him with his daddy?"</p>
<p>"Um, no, let's take him home and leave him on the porch
while you take a nap,
and we can take him to his Daddy when we pick up Delphine."</p>
<p>Satisfied with that, we walked on, and she kept on talking.
Half a block later: "Can he come with me while I nap?"</p>
<p>"No, he would melt.  Remember Peter brought his snowball 
inside and then it wasn't there?  His jacket was just wet?"
Appealing to literature sometimes helps.</p>
<p>"But he will be lonely!" </p>
<p>"But he will just melt into water if you bring him
inside.  I think he'll be okay on the porch."</p>
<p>We rounded the corner and crossed the street onto our block.
I walked a few paces ahead of Cordelia, and then turned around to
see how she was doing.  The snow was no longer in her hand.
"I dropped him!  Now he will never go back to his Daddy!
He's gonna be lonely!  He wants his Daddy and his brothers
and sisters!"</p>
<p>And she wept, heartbroken, all the way home over the sad 
fate of this little chunk of dirty snow.  I had to carry 
her and commiserate.  Poor thing.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="amy/career/sciency.html" class="u-url">Science Groupie For Hire</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Amy Brown</span></p>
            <p class="dateline"><a href="amy/career/sciency.html" rel="bookmark"><time class="published dt-published" datetime="2009-02-01T22:40:48-05:00" itemprop="datePublished" title="2009-02-01 22:40">2009-02-01 22:40</time></a></p>
                <p class="commentline">
        
    <a href="amy/career/sciency.html#disqus_thread" data-disqus-identifier="/amy/career/sciency">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>This morning while I was hanging up laundry in the basement,
I was thinking about stuff.  Mainly I was thinking about the
clever, interesting people at the party yesterday and trying
to figure out how I could spend more time with, or maybe work
with, clever, interesting people like that.  (Not that I didn't
work with clever, interesting people in software; in fact,
that's one of my favourite things about software.  Love me
some geeks.)  I was casting my mind about, musing on this
and that, on academia and science and research and clever
people doing interesting things, when it came to me:</p>
<p>I don't want to do science.</p>
<p>I don't know why that seemed like such a bombshell, but it seemed
very exciting at the time.  (It doesn't take much when
you're hanging cold wet t-shirts in a cold wet basement.)
I love science, I love facts,
I love knowing about the latest studies and ideas, but
I don't want to do the research myself.  I'm more interested
in getting things done (with the best new knowledge) than
in finding things out.  I love that other people are finding
things out but I just want to know what they've got.</p>
<p>So a career in dusty academia is not for me, which makes
this not much of an epiphany because I never thought it
was.  However, hanging out with Greg Wilson's clever friends
made me think that I would like to work close to
science, applying or disseminating the latest studies
and discoveries.  Blake's suggestion was science outreach,
and I also think science writing could be cool.  The other
idea that popped into my head was urban planning.  I feel 
like there must be some way to take scientific knowledge
and apply it to public policy, maybe try and get us out of
this mess we're in.</p>
<p>So many ideas.</p>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-53.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-51.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="latteblog";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer"><div style="margin-bottom: 12px">Contents © 2017         <a href="mailto:bwinton@latte.ca">Blake Winton</a>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">
<img alt="Creative Commons License BY-NC-SA" style="border-width: 0; vertical-align: bottom" src="https://licensebuttons.net/l/by-nc-sa/2.5/88x31.png"></a>
</div>
            
        </footer>
</div>
</div>


            <script src="assets/js/jquery.min.js"></script><script src="assets/js/bootstrap.min.js"></script><script src="assets/js/moment-with-locales.min.js"></script><script src="assets/js/fancydates.js"></script><script src="assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5805429-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
